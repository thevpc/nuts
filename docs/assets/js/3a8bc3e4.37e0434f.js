"use strict";(self.webpackChunknuts=self.webpackChunknuts||[]).push([[7872],{3406:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>o,default:()=>d,frontMatter:()=>s,metadata:()=>r,toc:()=>c});var i=t(4848),a=t(8453);const s={id:"nutsAppNAF",title:"Nuts Application Framework",sidebar_label:"Your first Application using NAF"},o="Using Nuts Application Framework (NAF)",r={id:"dev/nutsAppNAF",title:"Nuts Application Framework",description:"Using `nuts` is transparent as we have seen so far. It is transparent both at build time and runtime.",source:"@site/docs/dev/nuts-app-naf.md",sourceDirName:"dev",slug:"/dev/nutsAppNAF",permalink:"/nuts/docs/dev/nutsAppNAF",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/dev/nuts-app-naf.md",tags:[],version:"current",frontMatter:{id:"nutsAppNAF",title:"Nuts Application Framework",sidebar_label:"Your first Application using NAF"},sidebar:"tutorialSidebar",previous:{title:"Framework",permalink:"/nuts/docs/category/framework"},next:{title:"Your first Application using nuts",permalink:"/nuts/docs/dev/nutsApp"}},p={},c=[];function l(e){const n={code:"code",h1:"h1",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"using-nuts-application-framework-naf",children:"Using Nuts Application Framework (NAF)"}),"\n",(0,i.jsxs)(n.p,{children:["Using ",(0,i.jsx)(n.code,{children:"nuts"})," is transparent as we have seen so far. It is transparent both at build time and runtime.\nHowever, ",(0,i.jsx)(n.code,{children:"nuts"})," can provide our application a set of unique helpful features, such as install and uninstall hooks, comprehensive command line support and so on."]}),"\n",(0,i.jsxs)(n.p,{children:["To create your first ",(0,i.jsx)(n.code,{children:"NAF"})," application, you will need to add nuts as a dependency and change your ",(0,i.jsx)(n.code,{children:"pom.xml"})," as follows:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-xml",children:'<?xml version="1.0" encoding="UTF-8"?>\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n    <modelVersion>4.0.0</modelVersion>\n    <groupId>com.mycompany.app</groupId>\n    <artifactId>my-app</artifactId>\n    <version>1.0-SNAPSHOT</version>\n    <packaging>jar</packaging>\n    <dependencies>\n        <dependency>\n            <groupId>net.thevpc.nuts</groupId>\n            <artifactId>nuts</artifactId>\n            <version>0.8.4</version>\n        </dependency>\n        <dependency>\n            <groupId>jexcelapi</groupId>\n            <artifactId>jxl</artifactId>\n            <version>2.4.2</version>\n        </dependency>\n    </dependencies>\n    <properties>\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <maven.compiler.source>1.8</maven.compiler.source>\n        <maven.compiler.target>1.8</maven.compiler.target>\n        <nuts.application>true</nuts.application>\n    </properties>\n</project> \n'})}),"\n",(0,i.jsxs)(n.p,{children:["Please take note that we have added a property ",(0,i.jsx)(n.code,{children:"nuts.application=true"}),".\nActually this is not mandatory, but this will help ",(0,i.jsx)(n.code,{children:"nuts"})," package manager detect that this application uses NAF before downloading its jar (the information will be available in the ",(0,i.jsx)(n.code,{children:"pom.xml"})," descriptor on the remote repository)."]}),"\n",(0,i.jsx)(n.p,{children:'Then we will add some cool features to our application. We write a dummy message whenever the application is installed, uninstalled or updated.\nWe will also add support to "--file=[path]" argument to specify the workbook path.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:'package com.mycompany.app;\n\nimport java.io.File;\n\nimport jxl.Workbook;\nimport jxl.write.WritableWorkbook;\n\npublic class App implements NApplication {\n\n    public static void main(String[] args) {\n        // just create an instance and call runAndExit in the main method\n        // this method ensures that exist code is well propagted\n        // from exceptions to caller processes\n        new App().runAndExit(args);\n    }\n\n    @Override\n    public void run(NSession session) {\n        NCmdLine cmd = session.getAppCmdLine();\n        File file = new File("file.xls");\n        while (cmd.hasNext()) {\n            switch (cmd.getKey().getString()) {\n                case "--file": {\n                    NArg a = cmd.nextEntry().get();\n                    file = new File(a.getStringValue());\n                    break;\n                }\n                case "--fill": {\n                    // process other options here ...\n                    break;\n                }\n                default: {\n                    s.configureLast(cmd);\n                }\n            }\n        }\n        try {\n            WritableWorkbook w = Workbook.createWorkbook(file);\n            s.out().printf("Workbook just created at %s%n", file);\n        } catch (Exception ex) {\n            ex.printStackTrace(s.err());\n        }\n    }\n\n    @Override // this method is not required, implement when needed\n    public void onInstallApplication(NSession s) {\n        s.out().printf("we are installing My Application : %s%n", s.getAppId());\n    }\n\n    @Override // this method is not required, implement when needed\n    public void onUninstallApplication(NSession s) {\n        s.out().printf("we are uninstalling My Application : %s%n", s.getAppId());\n    }\n\n    @Override // this method is not required, implement when needed\n    public void onUpdateApplication(NSession s) {\n        s.out().printf("we are updating My Application : %s%n", s.getAppId());\n    }\n}\n\n'})}),"\n",(0,i.jsx)(n.p,{children:"Now we can install or uninstall the application and see the expected messages."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"nuts -y install com.mycompany.app:my-app\nnuts -y uninstall com.mycompany.app:my-app\n"})})]})}function d(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>r});var i=t(6540);const a={},s=i.createContext(a);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);