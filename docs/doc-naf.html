<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
    <link href="assets/images/favicon.ico" rel="icon"/>
    <title>Nuts Java Package Manager</title>
    <meta name="description" content="Nuts Java Package Manager Website">
    <meta name="author" content="thevpc">

    <!-- Stylesheet
    ============================== -->
    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css"/>
    <!-- Font Awesome Icon -->
    <link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css"/>
    <!-- Magnific Popup -->
    <link rel="stylesheet" type="text/css" href="assets/vendor/magnific-popup/magnific-popup.min.css"/>
    <!-- Highlight Syntax -->
    <link rel="stylesheet" type="text/css" href="assets/vendor/highlight.js/styles/github.css"/>
    <!-- Custom Stylesheet -->
    <link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css"/>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Smooch+Sans:wght@100..900&display=swap" rel="stylesheet">

</head>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125">

<!-- Preloader -->
<div class="preloader">
    <div class="lds-ellipsis">
        <div></div>
        <div></div>
        <div></div>
        <div></div>
    </div>
</div>
<!-- Preloader -->

<!-- Document Wrapper   
=============================== -->
<div id="main-wrapper" class="documentation-main-wrapper">
    
    <!-- Header
    ============================ -->
<header id="header" class="sticky-top">
    <!-- Navbar -->
    <nav class="primary-menu navbar navbar-expand-lg navbar-dropdown-dark">
        <div class="container-fluid">
            <!-- Sidebar Toggler -->
            <button id="sidebarCollapse" class="navbar-toggler d-block d-md-none" type="button"><span></span><span
                    class="w-75"></span><span class="w-50"></span></button>

            <!-- Logo -->
            <a class="logo ml-md-3" href="index.html" title="Nuts Package Manager"> <img
                    src="assets/images/nuts-icon.png" alt="Nuts Package Manager" width="32px"/> </a>
            <span class="text-4 ml-2" style="font-family: ZeroesTwo;"><strong><a href="naf.html">Nuts Application Framework</a></strong></span>
            <span class="text-2 ml-2" style="font-family: ZeroesTwo;"><span class="badge badge-info">v0.8.6.0</span></span>
            <!-- Logo End -->

            <!-- Navbar Toggler -->
            <button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#header-nav">
                <span></span><span></span><span></span></button>

            <div id="header-nav" class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    <li><a href="index.html" class="">Nuts Package Manager</a></li>
                    <li class="dropdown"> <a class="dropdown-toggle" href="#">Documentation</a>
                      <ul class="dropdown-menu">
                          <li><a class="dropdown-item not-active" href="doc-naf.html">Developer Documentation</a></li>
                          <li><a class="dropdown-item " href="contrib.html">Contributing</a></li>
                          <li><a class="dropdown-item " href="faq.html">FAQ</a></li>
                          <!--
                        <li><a class="dropdown-item" href="#">Action</a></li>
                        <li class="dropdown"><a class="dropdown-item dropdown-toggle" href="#">More</a>
                          <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="index.html">Apps</a></li>
                            <li><a class="dropdown-item" href="feature-header-dark.html">Change Log</a></li>
                            <li><a class="dropdown-item" href="feature-header-primary.html">FAQ</a></li>
                            <li><a class="dropdown-item" href="index-2.html">Another Link</a></li>
                          </ul>
                        </li>
                        -->
                      </ul>
                    </li>
                    <li><a href="blog.html" class="">Blog</a></li>
                    <li><a href="apps.html" class="">Apps</a></li>
                    <li><a href="download.html" class="">Download</a></li>
                    <li><a target="_blank" href="https://github.com/thevpc/nuts">GitHub</a></li>
                </ul>
            </div>
            <ul class="social-icons social-icons-sm ml-lg-2 mr-2">
                <li class="social-icons-twitter"><a data-toggle="tooltip"
                                                    href="http://www.twitter.com/tbensalah/" target="_blank"
                                                    title="" data-original-title="Twitter"><i
                        class="fab fa-twitter"></i></a></li>
                <li class="social-icons-facebook"><a data-toggle="tooltip"
                                                     href="http://www.facebook.com/tbensalah/" target="_blank"
                                                     title="" data-original-title="Facebook"><i
                        class="fab fa-facebook-f"></i></a></li>
                <li class="social-icons-dribbble"><a data-toggle="tooltip"
                                                     href="http://www.dribbble.com/tbensalah/" target="_blank"
                                                     title="" data-original-title="Dribbble"><i
                        class="fab fa-dribbble"></i></a></li>
            </ul>
        </div>
    </nav>
    <!-- Navbar End -->
</header>
<!-- Header End -->


    <!-- Content
    ============================ -->
    <div id="content" role="main">

        <!-- Sidebar Navigation
        ============================ -->
        <div class="idocs-navigation bg-light">
            <ul class="nav flex-column ">
                
                <li class="nav-item"><a class="nav-link" href="#UDAE2BAD83B2D2FBCBE8FC1E8DD94165F6F66890C">1 Nuts Library</a>
                    
                    
                    <ul class="nav flex-column">
                        
                        <li class="nav-item"><a class="nav-link" href="#UAC70F4ACB27A69EA599D022B507AA686EA809828">1.1 Maven Dependency</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#UDF7DE5C8D6624972BC9262AE225F027E6FB60275">1.2 Spring Boot Integration</a>
                            
                            
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="nav-item"><a class="nav-link" href="#U7C379992D01E78C455F1084979BA374510906A84">2 Input Output System</a>
                    
                    
                    <ul class="nav flex-column">
                        
                        <li class="nav-item"><a class="nav-link" href="#doc1">2.1 Nuts Text Format</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#UF7D573FEEC6442AEDCAF6888CB36955F0EEA983B">2.2 NOut Standard output</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#U6B5C62DA5D37AE51A77E26D2D3EA0A7E79327010">2.3 NErr Standard Error</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#U98A74D0B682545C0FB51109AD3BE6CD123DBC97C">2.4 NTrace</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#U5C4853E226DDA7E4B11CF465FD651E176B5121D5">2.5 NMsg for Messages and text formatting</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#UDD7945EA663FB91D5CDCFA6B1791197F5EDF79F2">2.6 NIn for simplified Input</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#UE8BC516671A96C01E7FC60E2D2DA567157D19495">2.7 NLog for elegant Logging</a>
                            
                            
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="nav-item"><a class="nav-link" href="#U0EE72504B95CF09F31BCDBCA8872FC4F8C42FC8A">3 Sessions and Workspaces</a>
                    
                    
                    <ul class="nav flex-column">
                        
                        <li class="nav-item"><a class="nav-link" href="#U1CB8C467A335A369B7D22A43E2248BDB30E5C549">3.1 NWorkspace</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#UFA5D484551139171A2F200AFD643E79DF0DCA775">3.2 NSession</a>
                            
                            
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="nav-item"><a class="nav-link" href="#U2313F5F2E8C307BE6A7E02AC3F845FB201152BCE">4 Files and Paths</a>
                    
                    
                    <ul class="nav flex-column">
                        
                        <li class="nav-item"><a class="nav-link" href="#U8640EDB78ACA255A91293F1405D0FAB2955CD709">4.1 NPath</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#U38EB11B2D23D1FD774F42D76B64CBF12D0DADD21">4.2 IO: Working with files</a>
                            
                            
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="nav-item"><a class="nav-link" href="#UBB16079C805F5B1035F84A0CDD925EA59C9A2674">5 Nuts Utilities</a>
                    
                    
                    <ul class="nav flex-column">
                        
                        <li class="nav-item"><a class="nav-link" href="#NCmdLine">5.1 NCmdLine</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#NOptional">5.2 NOptional</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#NStream">5.3 NStream</a>
                            
                            
                        </li>
                        
                    </ul>
                    
                </li>
                
                <li class="nav-item"><a class="nav-link" href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6 Nuts Application Framework</a>
                    
                    
                    <ul class="nav flex-column">
                        
                        <li class="nav-item"><a class="nav-link" href="#nutsAppNAF">6.1 Nuts Application Framework</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#filesystem">6.2 File system</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#nutsApp">6.3 Your first Application using nuts</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#UA527031D9FD2190202524E185D919F7974838721">6.4 Command Line Arguments</a>
                            
                            
                        </li>
                        
                        <li class="nav-item"><a class="nav-link" href="#U5B2E7ED4013F2621CF1DC9893122264E86CE0BD1">6.5 Nuts Descriptor Integration</a>
                            
                            
                        </li>
                        
                    </ul>
                    
                </li>
                
            </ul>
        </div>

        <!-- Docs Content
        ============================ -->
        <div class="idocs-content">
            <div class="container">

                
                    <!--pageLevel1-->
                    <section id="UDAE2BAD83B2D2FBCBE8FC1E8DD94165F6F66890C" >
                        <h2 class="main-section1"><a href="#UDAE2BAD83B2D2FBCBE8FC1E8DD94165F6F66890C">1 Nuts Library</a></h2>
                        <div class="text-card">
                        Nuts is much more than a package manager — it is a powerful and extensible runtime framework for Java applications. While it provides robust support for dependency resolution and artifact management compatible with Maven repositories, Nuts also delivers a comprehensive suite of libraries and services that turn it into a foundation for building modular, interactive, and automated tools.
Whether you're developing a CLI utility, a scripting engine, a DevOps automation tool, or a distributed plugin-based system, Nuts provides the scaffolding to manage dependencies, sessions, input/output, configuration, extensions, and workspace isolation — all in a portable and embeddable way.
<H4 class="md-title-2">Dual Role by Design</H4>
At its core, Nuts plays two essential roles:
<ul class="md-ul"><li class="md-uli">As a package manager, Nuts handles runtime dependency resolution, dynamic execution of artifacts, and integration with Maven-compatible repositories.</li><li class="md-uli">As a framework, Nuts offers a rich set of APIs to handle I/O, configuration, text formatting, command execution, file systems, compressed archives, and more — helping developers write cleaner, more powerful, and portable applications.</li></ul>

<H4 class="md-title-2">Build, Embed, Automate</H4>
Nuts is designed to work in multiple modes of operation:
<ul class="md-ul"><li class="md-uli">Run Java programs and tools directly from repositories without downloading or installing them manually.</li><li class="md-uli">Integrate it as a library to give your own application full access to the Nuts runtime capabilities.</li><li class="md-uli">Use it as a DevOps engine to build repeatable scripts, installers, or deployment workflows.</li><li class="md-uli">Use Nuts as a command-line tool to install, run, or deploy applications.</li><li class="md-uli">Build your own ecosystem of versioned components, launchers, and tools powered by Nuts' modular runtime.</li></ul>
In short, Nuts is a full-stack developer toolbox — part package manager, part framework, part scripting engine — designed to make modern Java development more dynamic, composable, and automation-friendly.

<H4 class="md-title-2">Whether you are:</H4>
<ul class="md-ul"><li class="md-uli">Building CLI tools that need versioned plugins and extensible command handling,</li><li class="md-uli">Developing DevOps utilities with integrated workspace/session management,</li><li class="md-uli">Creating modular applications that dynamically load artifacts at runtime,</li><li class="md-uli">Writing cross-environment installers, launchers, or monitoring tools,</li><li class="md-uli">Or designing educational platforms, scripting DSLs, or JVM-based OS abstractions,</li></ul>
Nuts delivers the foundational infrastructure so you can focus on features, not plumbing. Key Capabilities
The Nuts framework offers a wide set of features: ✅ Package & Dependency Management
<ul class="md-ul"><li class="md-uli">Compatible with Maven repositories and standards</li><li class="md-uli">Supports local, remote, and custom repositories</li><li class="md-uli">Enables runtime dependency resolution and dynamic artifact loading</li></ul>
✅ Configurable Workspaces & Sessions
<ul class="md-ul"><li class="md-uli">Isolated and shared workspace models with full lifecycle control</li><li class="md-uli">Sessions encapsulate runtime configuration, user preferences, I/O handling, logging, and output styles</li><li class="md-uli">Built-in support for dry-run, trace, confirmation, GUI/headless modes</li></ul>
✅ Structured I/O & Logging
<ul class="md-ul"><li class="md-uli">Supports semantic console output (NTF format) with colors, styles, and structured messages</li><li class="md-uli">Unified API for stdout/stderr, input, logging, formatting, and piping</li><li class="md-uli">Handles both human-friendly and machine-readable outputs (e.g., JSON, XML, Props, Tree)</li></ul>
✅ Filesystem & Networking Utilities
<ul class="md-ul"><li class="md-uli">Provides advanced file abstraction via NPath</li><li class="md-uli">Built-in support for streaming, compressing, uncompressing, digesting, and manipulating file trees</li><li class="md-uli">Unified access to HTTP, classpath, resources, and virtual filesystems</li></ul>
✅ Extensibility & Integration
<ul class="md-ul"><li class="md-uli">Supports modular extension points: listeners, commands, install hooks, and repositories</li><li class="md-uli">Embedded scripting with support for Java source snippets and other languages</li><li class="md-uli">Can be integrated into Spring, JavaFX, Swing, or any plain Java project</li></ul>
✅ Developer & DevOps Friendly
<ul class="md-ul"><li class="md-uli">Features like NRun, NExec, NShell, and NOps make it ideal for automation</li><li class="md-uli">Cross-platform support: Linux, macOS, Windows</li><li class="md-uli">Zero external runtime dependencies — deploy as a bare JAR, with automatic resolution on first use</li></ul>

<H4 class="md-title-2">Why Use Nuts?</H4>
Unlike traditional libraries or shell utilities, Nuts brings together the flexibility of a modern scripting environment, the structure of a dependency-aware runtime, and the developer convenience of a polished CLI framework — all in one embeddable package. You can think of it as your:
<ul class="md-ul"><li class="md-uli">Maven-like package manager, but runtime aware</li><li class="md-uli">Command-line framework, but fully pluggable</li><li class="md-uli">Launcher platform, but without installation or configuration hurdles</li><li class="md-uli">Shell scripting toolkit, but type-safe and Java-native</li></ul>
<p class="md-phrase">With <mark class="md-code md-code-` ">Nuts</mark>, the boundary between development and runtime fades away, letting you write, deploy, and evolve tools without sacrificing portability, maintainability, or developer experience.</p>

<H4 class="md-title-2">Lightweight, Modular, and Composable</H4>
<ul class="md-ul"><li class="md-uli">Modular architecture built around workspaces, sessions, and execution contexts.</li><li class="md-uli">Supports multi-repository, multi-version, and multi-runtime setups.</li><li class="md-uli">Helps maintain separation between application logic and environment/runtime logic — a key feature for scripting, testing, and dynamic execution.</li></ul>

<H4 class="md-title-2">Not Just Tools — Ecosystems</H4>
Nuts encourages composability: it enables you to define reusable, versioned components that can evolve independently and work across environments. It brings a new level of reusability to the Java ecosystem, bridging the gap between packaged applications, scripts, and shared libraries. Whether you're building a command-line tool, a plugin system, a runtime launcher, or a portable enterprise toolkit — Nuts gives you a structured, scalable, and developer-friendly platform to do it all.


                        </div>
                        
                            <!--pageLevel2-->
                            <section id="UAC70F4ACB27A69EA599D022B507AA686EA809828" >
                                <h3 class="main-section2"><a href="#UDAE2BAD83B2D2FBCBE8FC1E8DD94165F6F66890C">1.1 Maven Dependency</a></h3>
                                <div class="text-card">
                                <p class="md-phrase">to make use of <b class="md-bold">nuts</b> library  you need add the dependency  <code class="md-code md-code-``` net">.thevpc.nuts#nuts-lib:</code> and provide a hint to maven to point to the right repository <code class="md-code md-code-``` "> https://maven.thevpc.net</code></p>
<H4 class="md-title-2">Configure your pom.xml</H4>
<pre class="md-code md-code-``` xml"><code class="xml">
    &lt;dependencies&gt;
        &lt;dependency&gt;&lt;groupId&gt;net.thevpc.nuts&lt;/groupId&gt;&lt;artifactId&gt;nuts&lt;/artifactId&gt;&lt;version&gt;0.8.6&lt;/version&gt;&lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;repositories&gt;
        &lt;repository&gt;&lt;id&gt;thevpc&lt;/id&gt;&lt;url&gt;https://maven.thevpc.net&lt;/url&gt;&lt;/repository&gt;
    &lt;/repositories&gt;
    
</code></pre>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="UDF7DE5C8D6624972BC9262AE225F027E6FB60275" >
                                <h3 class="main-section2"><a href="#UDAE2BAD83B2D2FBCBE8FC1E8DD94165F6F66890C">1.2 Spring Boot Integration</a></h3>
                                <div class="text-card">
                                nuts can work flawlessly with spring boot applications. You just need one annotation @NAppDefinition to mark your SpringBootApplication.
Add the following dependency to you spring boot project
<pre class="md-code md-code-``` xml"><code class="xml">
    &lt;dependency&gt;
        &lt;groupId&gt;net.thevpc.nuts&lt;/groupId&gt;
        &lt;artifactId&gt;nuts-spring-boot&lt;/artifactId&gt;
        &lt;version&gt;0.8.6.0&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<p class="md-phrase">Add @NAppDefinition in your <mark class="md-code md-code-` ">SpringBootApplication</mark> top class.</p>
<pre class="md-code md-code-``` java"><code class="java">
@NAppDefinition
@SpringBootApplication
@Import(NutsSpringBootConfig.class)
public class AppExample {
    public static void main(String[] args) {
        SpringApplication.run(AppExample.class, args);
    }

    @NAppRunner // not mandatory
    public void run() {
        NOut.println("Hello ##World##");
    }
}
</code></pre>
Now you can inject Nuts objects in your beans
<pre class="md-code md-code-``` java"><code class="java">
@Component
public class MyBean {
    @Autowired NSession session;
    @Autowired NWorkspace workspace;
    @Autowired NElements elems;
    @Autowired NIO nio;
    @Autowired NScheduler scheduler;
    @Autowired NTerminal term;
    @Autowired NPrintStream out;
}

</code></pre>

                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                    </section>
                    <hr class="divider">
                
                    <!--pageLevel1-->
                    <section id="U7C379992D01E78C455F1084979BA374510906A84" >
                        <h2 class="main-section1"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2 Input Output System</a></h2>
                        <div class="text-card">
                        The Nuts library offers a comprehensive and flexible input/output system designed for modern CLI and application needs, including:
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NIn</mark>: Simplifies and unifies input handling, supporting both interactive and programmatic input sources.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NOut</mark>: The standard output stream abstraction supporting colorful, structured, and formatted output that respects the current session context and output format (plain text, JSON, XML, tables, etc).</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NErr</mark>: Dedicated error output stream, separate from standard output, ensuring proper logging and error visibility.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NTrace</mark>: Specialized output stream for trace/debug information that is only displayed when trace mode is enabled, helping users debug without cluttering normal output.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NLog</mark>: A logging interface integrating with Nuts' session and workspace model to produce contextual logs with flexible verbosity and output controls.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NMsg</mark>: A message abstraction enabling rich, multi-language, and parameterized messages with support for localization and structured formatting.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NTF</mark>: Nuts Text Format — a powerful formatting system that extends standard text output with features like color, styles, and structured data rendering, allowing consistent and attractive CLI outputs.</p></li></ul>
Together, these components create a rich and developer-friendly IO system, enabling:
<ul class="md-ul"><li class="md-uli">Colorful and readable console output.</li><li class="md-uli">Structured output formats automatically adapting to context.</li><li class="md-uli">Clear separation of standard, error, and debug outputs.</li><li class="md-uli">Localizable and parameterized messages.</li><li class="md-uli">Simplified user input handling.</li></ul>
This system is integrated tightly with the Nuts session concept, meaning output behavior automatically adapts to user preferences, environment, and command-line options, making CLI tools more usable and professional.

                        </div>
                        
                            <!--pageLevel2-->
                            <section id="doc1" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.1 Nuts Text Format</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-1">Nuts Text Format (NTF)</H4>
<p class="md-phrase">The <b class="md-bold">Nuts Text Format (NTF)</b> is a lightweight, expressive markup language designed specifically to enhance command-line interface (CLI) output with rich, portable, and visually appealing formatting. It provides a powerful yet simple syntax that lets developers create colorful, structured, and semantically meaningful text that works seamlessly across different terminal environments and beyond.</p>
<H4 class="md-title-2">The Need for NTF</H4>
Traditional terminal output often relies on plain text or embedded ANSI escape codes to achieve colors and styles. This approach has several drawbacks:
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><b class="md-bold">Lack of readability:</b> Raw escape sequences are hard to read and maintain within source code.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Poor portability:</b> Different terminals support different levels of ANSI or control codes, leading to inconsistent rendering.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Limited structure:</b> Plain text and raw ANSI codes do not express document structure well (like lists, tables, sections).</p></li></ul>
On the other hand, existing markup languages each have their own limitations for CLI contexts:
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><b class="md-bold">HTML</b> is rich and flexible but too verbose and requires an HTML viewer, unsuitable for terminals.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Markdown</b> is easy to write and readable but lacks support for dynamic styling and rich terminal features.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Man pages (troff/groff)</b> provide basic terminal help formatting but are complex to author and limited in styling options.</p></li></ul>
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">What Makes NTF Unique?</H4>
<p class="md-phrase">NTF is crafted to fill this gap by being a <b class="md-bold">terminal-first markup format</b> that is both <b class="md-bold">human-readable and machine-processable</b>, with several key advantages:</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><b class="md-bold">Readable markup:</b> NTF syntax uses simple inline markers for colors, font styles, lists, tables, and sections, which are easy to write and understand.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Rich formatting:</b> Supports foreground and background colors, bold/italic/underline, code blocks, bullet and numbered lists, tables, links, and other structured elements.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Portability:</b> NTF content is <b class="md-bold">independent of the terminal's escape code specifics</b>. Instead, it is parsed and translated to the appropriate ANSI sequences or other target formats at runtime.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Multi-target rendering:</b> Beyond ANSI terminals, NTF can be converted to <b class="md-bold">Markdown</b> (for documentation or developer notes) and <b class="md-bold">HTML</b> (for web-based manuals), ensuring a unified authoring experience.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Context-awareness:</b> NTF rendering adapts automatically to the capabilities of the target output device or session configuration, allowing graceful degradation when color or style is not supported.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Easy toggling:</b> Users can enable or disable colored output through standard Nuts options or programmatically, without affecting the underlying markup.</p></li></ul>
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">NTF in Nuts Ecosystem</H4>
<p class="md-phrase">Within the <b class="md-bold">Nuts</b> toolbox, NTF plays a central role in delivering a consistent, high-quality user experience:</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><b class="md-bold">Command-line help system:</b> All command help, options, examples, and warnings in Nuts are authored in NTF. This allows help to be:</p><ul class="md-ul"><li class="md-uli"><p class="md-phrase"><b class="md-bold">Colorful and well-structured</b> on capable terminals.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Plain-text friendly</b> when color is disabled.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Automatically exportable</b> to Markdown or HTML for documentation portals.</p></li></ul></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Output formatting:</b> When printing messages, lists, objects, or errors, Nuts can utilize NTF to add semantic structure and emphasis, improving clarity and user comprehension.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">Unified authoring:</b> Developers write output messages once in NTF and can be confident it will render correctly across all supported environments without manual adjustments.</p></li></ul>
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">How NTF compares to other formats:</H4>
<p class="md-phrase">NTF is specifically designed for <b class="md-bold">developer-friendly, portable, terminal-first output formatting</b>. It bridges the gap between simple text styling (like ANSI escape codes) and more advanced document-oriented formats (like Markdown or AsciiDoctor), making it uniquely suited for CLI applications.</p>
The table below highlights how NTF compares to other common formats across key capabilities:
<table class="table table-bordered table-striped"><tr><th>Feature</th>
<th><p class="md-phrase"> <b class="md-bold">NTF</b>                                                       </p></th>
<th><p class="md-phrase"> <b class="md-bold">ANSI Escape Codes</b> </p></th>
<th><p class="md-phrase"> <b class="md-bold">Markdown</b>    </p></th>
<th><p class="md-phrase"> <b class="md-bold">AsciiDoctor</b> </p></th>
<th><p class="md-phrase"> <b class="md-bold">HTML</b>       </p></th>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Colored output</b>                                </p></td>
<td>✅ Named colors, indexed and hex support</td>
<td>✅ Manual, code-based</td>
<td>❌ (Extensions needed)</td>
<td>✅ With roles/styles</td>
<td>✅ CSS/inline styles</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Styled text</b>                                   </p></td>
<td>✅ Bold, italic, underline, strikethrough</td>
<td>✅ Limited (manual control)</td>
<td>✅ Bold, italic</td>
<td>✅ Bold, italic, underline</td>
<td>✅ Full style control</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Semantic color tags</b> (e.g. <mark class="md-code md-code-` ">error</mark>, <mark class="md-code md-code-` ">warning</mark>) </p></td>
<td><p class="md-phrase"> ✅ Built-in mappings (<code class="md-code md-code-` ">##:red:word##</code>, <code class="md-code md-code-` ">##:info:word##</code>, etc.) </p></td>
<td>❌ None</td>
<td>❌ None</td>
<td>⚠️ Manual via roles</td>
<td>✅ Possible via class</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Nested/Combined styles</b>                                </p></td>
<td><p class="md-phrase"> ✅ Fully supported (e.g. <code class="md-code md-code-` ">##{:red:##{:bold:word}##}##</code>         </p></td>
<td>❌ Complex / fragile</td>
<td>❌ Not supported</td>
<td>✅ Supported</td>
<td>✅ Fully supported</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Structured sections</b> (titles, subtitles)       </p></td>
<td><p class="md-phrase"> ✅ NTF supports semantic headers (<code class="md-code md-code-` "># Title</code>, <code class="md-code md-code-` ">## Subtitle</code>)    </p></td>
<td>❌ None</td>
<td>✅ Basic headings</td>
<td>✅ Full document structure</td>
<td>✅ Rich document structure</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Lists (bullet, numbered)</b>                      </p></td>
<td>❌ Not yet</td>
<td>❌ None</td>
<td>✅ Yes</td>
<td>✅ Yes</td>
<td>✅ Yes</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Tables</b>                                        </p></td>
<td>❌ Not yet</td>
<td>❌ None</td>
<td>✅ Basic tables</td>
<td>✅ Rich tables</td>
<td>✅ Rich tables</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Syntax highlighting</b> (code snippets)           </p></td>
<td>✅ With language tag</td>
<td>❌ None</td>
<td>✅ (Limited, via extensions)</td>
<td>✅ With language tag</td>
<td>✅ Full, with JS/CSS</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Terminal rendering support</b>                    </p></td>
<td>✅ Auto-adapts (ANSI, plain, HTML, Markdown)</td>
<td>✅ Terminal only</td>
<td>❌ Not terminal-targeted</td>
<td>❌ Not terminal-targeted</td>
<td>❌ Not terminal-targeted</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Portability across environments</b>               </p></td>
<td>✅ Designed for CLI and convertible to HTML/Markdown</td>
<td>❌ Terminal only</td>
<td>✅ Editor/docs only</td>
<td>✅ Editor/docs only</td>
<td>✅ Web/browser only</td>
</tr>
<tr><td><p class="md-phrase"> <b class="md-bold">Ease of authoring for CLI output</b>              </p></td>
<td>✅ Very high (compact, readable, intuitive)</td>
<td>❌ Low (escape-heavy)</td>
<td>⚠️ Limited styling</td>
<td>⚠️ Verbose</td>
<td>❌ Too verbose for CLI</td>
</tr>
</table>
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">Summary</H4>
<p class="md-phrase">The Nuts Text Format is a <b class="md-bold">modern, terminal-optimized markup language</b> that:</p>
<ul class="md-ul"><li class="md-uli">Improves readability and maintainability of CLI output markup.</li><li class="md-uli">Enables richly formatted, colorful, and structured terminal output.</li><li class="md-uli">Supports conversion to Markdown and HTML for seamless documentation.</li><li class="md-uli">Enhances the Nuts ecosystem by unifying CLI and documentation presentation.</li></ul>
NTF represents a thoughtful balance between simplicity, expressiveness, and portability, empowering Nuts users and developers to build sophisticated, professional command-line applications with minimal effort.
<hr class="divider" class="md-hr"/>
<p class="md-phrase"><b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> comes up with a simple coloring syntax that helps writing better looking portable command line programs. standard output is automatically configured to accept the "Nuts Text Format" (NTF) syntax.  Though it remains possible to disable this ability using the --!color standard option (or programmatically,  see <b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> API documentation). NTF will be translated to the underlying terminal implementation using ANSI  escape code on linux/windows terminals if available.</p>
Here after a showcase of available NTF syntax.
<p><img src="assets/images/console/text-coloring-format-01.png" class="md-img img-fluid border" alt="text-coloring-format"></img></p>
<p><img src="assets/images/console/text-coloring-format-02.png" class="md-img img-fluid border" alt="text-coloring-format"></img></p>
<p><img src="assets/images/console/text-coloring-format-03.png" class="md-img img-fluid border" alt="text-coloring-format"></img></p>
<p><img src="assets/images/console/text-coloring-format-04.png" class="md-img img-fluid border" alt="text-coloring-format"></img></p>


<H4 class="md-title-1">Nuts Text Format Specification</H4>
<pre class="md-code md-code-``` "><code class="">
&lt;TOKEN&gt; S10: '##########'
&lt;TOKEN&gt; S9 : '#########'
&lt;TOKEN&gt; S8 : '########'
&lt;TOKEN&gt; S7 : '#######'
&lt;TOKEN&gt; S6 : '######'
&lt;TOKEN&gt; S5 : '#####'
&lt;TOKEN&gt; S4 : '####'
&lt;TOKEN&gt; S3 : '###'
&lt;TOKEN&gt; S2 : '##'
&lt;TOKEN&gt; S1 : '##'
&lt;TOKEN&gt; A3 : '\```'

&lt;RULE&gt;  S2 ':' KEY ':' ANYTHING S2
&lt;RULE&gt;  S2 '{:' WORD ANYTHING S2
&lt;RULE&gt;  13 ANYTHING A3

</code></pre>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="UF7D573FEEC6442AEDCAF6888CB36955F0EEA983B" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.2 NOut Standard output</a></h3>
                                <div class="text-card">
                                <p class="md-phrase">The <mark class="md-code md-code-` ">NOut</mark> class is a simple and powerful utility for writing to the standard output in Nuts. It provides a consistent and extensible way to print text, formatted messages, and structured data.</p>
<p class="md-phrase">By default, <mark class="md-code md-code-` ">NOut</mark> delegates to the session's configured output stream, defined as an <mark class="md-code md-code-` ">NPrintStream</mark> in the current <mark class="md-code md-code-` ">NSession</mark>. This stream is <b class="md-bold">customizable</b>, <b class="md-bold">structured</b>, and <b class="md-bold">NTF-aware</b>, making it suitable for both human-readable and machine-readable outputs (JSON, XML, etc.).</p>
<p class="md-phrase">Unlike <code class="md-code md-code-` ">System.out</code>, <mark class="md-code md-code-` ">NOut</mark> provides enhanced capabilities:</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase">Intelligent rendering of objects (beyond basic <code class="md-code md-code-` ">toString()</code>),</p></li><li class="md-uli"><p class="md-phrase">Colorized and formatted output via <b class="md-bold">NTF (Nuts Text Format)</b>,</p></li><li class="md-uli">Support for various structured formats (e.g., JSON, YAML, XML, TSON),</li><li class="md-uli">Support for formatted messages with placeholders,</li><li class="md-uli">Table and tree rendering.</li></ul>
<H4 class="md-title-2">Basic Usage</H4>
The simplest way to print a message to the console:
<pre class="md-code md-code-``` java"><code class="java">
    Nuts.require();
    NOut.println("Hello");
</code></pre>

<H4 class="md-title-2">Using NTF</H4>
NTF enables you to add rich formatting and colorization:
<pre class="md-code md-code-``` java"><code class="java">
    NOut.println("##Hello colored## ##:_:Hello underlined## ");
    NOut.println("##:yellow:Hello in yellow##");
    NOut.println("##:warn:this is a warning##");
    NOut.println("##:fxFF0000:this is a red message##");
</code></pre>

<H4 class="md-title-2">Rendering structured output</H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NOut</mark> can render structured output based on the active format in the <mark class="md-code md-code-` ">NSession</mark>.</p>
<pre class="md-code md-code-``` java"><code class="java">
    class Customer{String id;String name;}
    Customer customer1,customer2,customer3; ...
    // configure le current output to render objects as json
    // to display the curstomer list as a json array
    NSession.of().json();
    NOut.println(Arrays.asList(customer1,customer2,customer3));

    // you can do the same for yaml,tson,xml,table and tree (as formats)
    NSession.of().tree();
    NOut.println(Arrays.asList(customer1,customer2,customer3));
</code></pre>

<H4 class="md-title-2">Formatted Messages</H4>
You can build formatted messages using NMsg, with placeholder support and type-aware formatting:
<pre class="md-code md-code-``` java"><code class="java">
    NOut.println(NMsg.of("this is a %s message that is %s %% beautiful",true,100));
</code></pre>
Values such as booleans and numbers are rendered with distinct styles (e.g., colors) for better readability.
Or you can build your own styled arguments :
<pre class="md-code md-code-``` java"><code class="java">
    NOut.println(NMsg.of("this is a %s ",NMsg.ofStyledPrimary1("message")));
</code></pre>

<H4 class="md-title-2">Working with Tables</H4>
<p class="md-phrase">To have full control over tabular output, use <mark class="md-code md-code-` ">NMutableTableModel</mark>:</p>
<pre class="md-code md-code-``` java"><code class="java">
    NSession session=...;
    Object a,b,c,d; ...
    NMutableTableModel m = NTableModel.of();
    m.newRow().addCells(a,b,c,d);
    NOut.println(m);
</code></pre>

<H4 class="md-title-2">Working with Trees</H4>
<p class="md-phrase">To render hierarchical structures, you can implement a custom <mark class="md-code md-code-` ">NTreeModel</mark>:</p>
<pre class="md-code md-code-``` java"><code class="java">
    NOut.println(
        new NTreeModel() {
            @Override
            public Object getRoot () {
                return "/";
            }
        
            @Override
            public List&lt;NDependencyTreeNodeAndFormat&gt; getChildren (Object node){
                if ("/".equals(node)) {
                    return Arrays.asList(1,2,3);
                }
                return Arrays.asList();
            }
        }
        );
</code></pre>

<H4 class="md-title-2">Summary</H4>
<p class="md-phrase">The <mark class="md-code md-code-` ">NOut</mark> class provides a robust and extensible mechanism for console output in the Nuts ecosystem. Whether you're logging simple messages, displaying structured data, or building CLI tools, NOut ensures consistent and powerful rendering—fully aligned with Nuts' NTF and output formatting infrastructure.</p>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="U6B5C62DA5D37AE51A77E26D2D3EA0A7E79327010" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.3 NErr Standard Error</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><mark class="md-code md-code-` ">NErr</mark> is the error-stream counterpart to <mark class="md-code md-code-` ">NOut</mark>, providing structured, colored, and format-aware error output in the <b class="md-bold">Nuts</b> ecosystem.</p>
<p class="md-phrase">It writes to the <b class="md-bold">standard error stream</b> configured in the current <mark class="md-code md-code-` ">NSession</mark>, represented by a customizable <mark class="md-code md-code-` ">NPrintStream</mark>. Like <mark class="md-code md-code-` ">NOut</mark>, this stream is fully <b class="md-bold">NTF-aware</b> and supports a wide range of formats such as JSON, YAML, TSON, XML, tree, and table.</p>
<H4 class="md-title-2">Key Features</H4>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase">Delegates to <code class="md-code md-code-` ">NSession.err()</code> (an <mark class="md-code md-code-` ">NPrintStream</mark>)</p></li><li class="md-uli"><p class="md-phrase">Fully supports <b class="md-bold">NTF (Nuts Text Format)</b> for colored and styled messages</p></li><li class="md-uli">Supports structured output in multiple formats</li><li class="md-uli"><p class="md-phrase">Works seamlessly with <mark class="md-code md-code-` ">NMsg</mark>, <mark class="md-code md-code-` ">NMutableTableModel</mark>, and <mark class="md-code md-code-` ">NTreeModel</mark></p></li><li class="md-uli">Ideal for logging warnings, errors, diagnostics, and debugging information</li></ul>
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">Basic Example</H4>
<pre class="md-code md-code-``` java"><code class="java">
Nuts.require();
NErr.println("An error occurred");
</code></pre>

<H4 class="md-title-2">Styled Error Messages</H4>
You can leverage NTF for expressive and styled output:
<pre class="md-code md-code-``` java"><code class="java">
NErr.println("##:error:Something went wrong!##");
NErr.println("##:warn:Warning:## Potential issue detected");
NErr.println("##:fxFF0000:Critical failure##");
</code></pre>

<H4 class="md-title-2">Structured Error Reporting</H4>
Just like with NOut, you can render structured error data using the current session format:
<pre class="md-code md-code-``` java"><code class="java">
NSession.of().json();
NErr.println(errorList); // errorList = List&lt;ErrorDetail&gt;
</code></pre>
You can switch to any other supported format (yaml, xml, table, tree, tson, etc.) using:
<pre class="md-code md-code-``` java"><code class="java">
NSession.of().table();
NErr.println(errorList);
</code></pre>

<H4 class="md-title-2">Formatted Diagnostic Messages</H4>
<p class="md-phrase">Use <mark class="md-code md-code-` ">NMsg</mark> to build dynamic, strongly typed error messages:</p>
<pre class="md-code md-code-``` java"><code class="java">
NErr.println(NMsg.of("Task %s failed after %d attempts", "SyncJob", 3));
</code></pre>

<H4 class="md-title-2">Use Cases</H4>
<ul class="md-ul"><li class="md-uli">Displaying runtime errors or exceptions in a user-friendly way</li><li class="md-uli">Emitting machine-readable diagnostics for automation tools</li><li class="md-uli">Rendering hierarchical error trees or tabular summaries</li><li class="md-uli">Debugging output during CLI tool development</li></ul>

<H4 class="md-title-2">Summary</H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NErr</mark> brings all the expressive power of NOut to the standard error stream. Whether you're showing simple warnings or structured diagnostic trees, <mark class="md-code md-code-` ">NErr</mark> ensures your error messages are readable, styled, and format-compliant with the Nuts session configuration.</p>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="U98A74D0B682545C0FB51109AD3BE6CD123DBC97C" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.4 NTrace</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-1"><p class="md-phrase"><mark class="md-code md-code-` ">NTrace</mark> — Conditional Trace Output Utility</p></H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NTrace</mark> is a structured output utility in <b class="md-bold">Nuts</b> used to emit <b class="md-bold">optional diagnostic or trace information</b> to the standard output stream. It behaves like <mark class="md-code md-code-` ">NOut</mark>, but only prints output when <b class="md-bold">tracing is explicitly enabled</b> in the current session.</p>
<hr class="divider" class="md-hr"/>
<H4 class="md-title-2"><p class="md-phrase">🔍 When to Use <mark class="md-code md-code-` ">NTrace</mark></p></H4>
<p class="md-phrase">Use <mark class="md-code md-code-` ">NTrace</mark> to provide <b class="md-bold">optional messages</b> that :</p>
<ul class="md-ul"><li class="md-uli">Help during development or debugging,</li><li class="md-uli">Provide insights into internal steps,</li><li class="md-uli">Are not critical and should not mix with standard output (NOut) or error messages (NErr).</li></ul>
<p class="md-phrase">Unlike <mark class="md-code md-code-` ">NOut</mark>, <mark class="md-code md-code-` ">NTrace</mark> output is optional and controlled by the trace flag, so it won’t clutter output if tracing is turned off.</p>

<H4 class="md-title-2">Output Destination</H4>
<p class="md-phrase">> <b class="md-bold">Note:</b>   > <mark class="md-code md-code-` ">NTrace</mark> writes to <code class="md-code md-code-` ">NSession.out()</code> — the same output stream used by <mark class="md-code md-code-` ">NOut</mark>.   > In contrast, <mark class="md-code md-code-` ">NErr</mark> writes to <code class="md-code md-code-` ">NSession.err()</code>.</p>
This means trace messages can be redirected, styled, and formatted consistently with standard output, but only appear when tracing is active.
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">Trace Mode Behavior</H4>
Trace is enabled by default.
To disable trace output, users can:
<ul class="md-ul"><li class="md-uli">Pass --trace=false or --!trace on the command line:</li></ul>
<pre class="md-code md-code-``` bash"><code class="bash">
nuts --trace=false my-app 
nuts --!trace my-app 
</code></pre>
<ul class="md-ul"><li class="md-uli">Programmatically disable it in the session:</li></ul>
<pre class="md-code md-code-``` java"><code class="java">
NSession.of().setTrace(false);
</code></pre>
When trace is disabled, all calls to NTrace.println(...) are ignored silently.
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2">Example Usage</H4>
<pre class="md-code md-code-``` "><code class="">
Nuts.require();

// This will print only if trace is enabled (default is true)
NTrace.println("Loading configuration from default path...");
</code></pre>

<H4 class="md-title-2">Features (Same as NOut)</H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NTrace</mark> supports the complete feature set of <mark class="md-code md-code-` ">NOut</mark>, including:</p>
<ul class="md-ul"><li class="md-uli">NTF formatting for colors and styling,</li><li class="md-uli">Structured rendering (e.g., JSON, YAML, XML, TSON, table, tree),</li><li class="md-uli">Formatted messages using NMsg,</li><li class="md-uli">Integration with the current session’s output configuration.</li></ul>

<H4 class="md-title-2">Best Practices</H4>
Use NTrace to display less relevant or verbose messages that:
<ul class="md-ul"><li class="md-uli">Are helpful for end users who want to better understand what the tool is doing,</li><li class="md-uli">Should not appear during normal usage but may provide useful context when verbosity is desired (e.g., progress steps, skipped actions, fallback behavior),</li><li class="md-uli">Can be safely ignored without impacting the understanding of the main output.</li></ul>
<p class="md-phrase">> <b class="md-bold">Note:</b>   > <mark class="md-code md-code-` ">NTrace</mark> is not a developer logging mechanism. > For internal developer-oriented logging, use NLog.</p>



                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="U5C4853E226DDA7E4B11CF465FD651E176B5121D5" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.5 NMsg for Messages and text formatting</a></h3>
                                <div class="text-card">
                                <p class="md-phrase">The <mark class="md-code md-code-` ">NMsg</mark> class is a powerful utility for building <b class="md-bold">structured</b>, <b class="md-bold">formatted</b>, and <b class="md-bold">styled</b> messages in <b class="md-bold">Nuts</b>. Messages constructed using <mark class="md-code md-code-` ">NMsg</mark> can be safely rendered in various output formats (e.g., plain text, NTF, JSON, etc.) and support placeholders, syntax coloring, and semantic styling.</p>
<p class="md-phrase"><mark class="md-code md-code-` ">NMsg</mark> is fully integrated with <mark class="md-code md-code-` ">NOut</mark> and <mark class="md-code md-code-` ">NErr</mark> for displaying rich and meaningful CLI output.</p>
<H4 class="md-title-2">Basic Message Construction</H4>
<H4 class="md-title-3"><p class="md-phrase">C-style Formatting (<mark class="md-code md-code-` ">ofC</mark>)</p></H4>
<p class="md-phrase">Use <mark class="md-code md-code-` ">ofC</mark> to create messages using standard <code class="md-code md-code-` ">String.format()</code>-style syntax:</p>
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofC("Hello %s", "world"));
</code></pre>
<p class="md-phrase">Placeholders like <code class="md-code md-code-` ">%s</code>, <code class="md-code md-code-` ">%d</code>, etc., behave as expected. Useful for simple messages with positional arguments.</p>

<H4 class="md-title-3">Java MessageFormat (ofJ)</H4>
<p class="md-phrase">Use <mark class="md-code md-code-` ">ofJ</mark> for Java-style formatting with <code class="md-code md-code-` ">{0}</code>, <code class="md-code md-code-` ">{1}</code> placeholders:</p>
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofJ("Hello {0}", "world"));
NOut.println(NMsg.ofJ("Hello {}", "world"));      // SLF4J-style
</code></pre>
Both formats are supported, and will be filled using the provided arguments in order (but should not be mixed).
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">{}</code> placeholders are matched sequentially, like in SLF4J.</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">{0}</code>, <code class="md-code md-code-` ">{1}</code>, etc. allow for specific argument reordering or reuse.</p></li></ul>


<H4 class="md-title-2">Variable-based Formatting (ofV)</H4>
<p class="md-phrase">Use <mark class="md-code md-code-` ">ofV</mark> to format messages using named variables:</p>
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofV("Hello $v", NMaps.of("v", "world")));
NOut.println(NMsg.ofV("Hello ${v}", NMaps.of("v", "world")));
</code></pre>
<p class="md-phrase">Both <code class="md-code md-code-` ">$v</code> and <code class="md-code md-code-` ">${v}</code> syntaxes are supported.</p>
Variables are replaced by name using the $ prefix. This is useful for dynamically named arguments or template-based rendering, particularly when formatting messages from dynamic key-value maps (e.g., for templates or localization).
<ul class="md-ul"><li class="md-uli">$v is simple and concise.</li><li class="md-uli"><p class="md-phrase">${v} is safer when followed by alphanumeric characters (e.g., <code class="md-code md-code-` ">$val123text</code> vs <code class="md-code md-code-` ">${val}123text</code>).</p></li></ul>
Missing variables are left as-is or replaced with a placeholder, depending on context or configuration.

<H4 class="md-title-2">Styling Output</H4>
In addition to content, NMsg supports visual styling, including colors and font modes.
<H4 class="md-title-3">Style by Color Index (Predefined Color Schemes)</H4>
Use built-in style presets based on Nuts theme indexes:
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledPrimary1("world")));
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledSecondary5("world")));
</code></pre>
These correspond to configurable UI themes, ensuring consistency across color schemes.

<H4 class="md-title-3">Style by Foreground Color</H4>
You can apply arbitrary Java Color objects:
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledForegroundColor("world", Color.RED)));
</code></pre>
This sets the foreground color (text color) to red. Works with any java.awt.Color as far as the current terminal supports it.

<H4 class="md-title-3">Style by Mode (Blink, Bold, etc.)</H4>
Use text styles for visual emphasis:
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledBlink("world", Color.RED)));
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledBold("world")));
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledStriked("world")));
</code></pre>
You can combine color and style for higher impact.

<H4 class="md-title-3">Style by Semantic Token Type</H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NMsg</mark> also supports semantic styling, commonly used in syntax highlighting:</p>
<pre class="md-code md-code-``` java"><code class="java">
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledComments("world")));
NOut.println(NMsg.ofC("Hello %s", NMsg.ofStyledWarn("world")));
</code></pre>
These apply styles based on meaning:
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">ofStyledComments</mark>: renders like source code comments.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">ofStyledWarn</mark>: renders with a warning color/style.</p></li></ul>
Additional token types include:
<ul class="md-ul"><li class="md-uli"><code class="md-code md-code-` ">ofStyledString(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">ofStyledKeyword(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">ofStyledBoolean(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">ofStyledError(...)</code></li></ul>


<H4 class="md-title-1">Summary</H4>
<p class="md-phrase">The <mark class="md-code md-code-` ">NMsg</mark> class allows you to:</p>
<ul class="md-ul"><li class="md-uli">Format messages using multiple conventions (C-style, Java-style, named variables),</li><li class="md-uli">Style message fragments with semantic types or custom colors,</li><li class="md-uli"><p class="md-phrase">Seamlessly integrate with <mark class="md-code md-code-` ">NOut</mark>, <mark class="md-code md-code-` ">NErr</mark>, <mark class="md-code md-code-` ">NPrintStream</mark>,... for rich CLI or structured outputs.</p></li></ul>
<p class="md-phrase">Whether you're building user-facing tools or internal diagnostics, <mark class="md-code md-code-` ">NMsg</mark> ensures your messages are clear, consistent, and visually expressive.</p>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="UDD7945EA663FB91D5CDCFA6B1791197F5EDF79F2" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.6 NIn for simplified Input</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-1"><p class="md-phrase"><mark class="md-code md-code-` ">NIn</mark> — Structured Input Utility</p></H4>
<p class="md-phrase">The <mark class="md-code md-code-` ">NIn</mark> class is the <b class="md-bold">interactive input</b> utility of the <b class="md-bold">Nuts</b> platform. It provides a simple and consistent interface to read from the <b class="md-bold">standard input stream</b> (<code class="md-code md-code-` ">NSession::in()</code>), with built-in support for prompts, password masking, and type-safe values.</p>
<H4 class="md-title-2">Basic Input Reading</H4>
<H4 class="md-title-3">Reading a Line</H4>
<pre class="md-code md-code-``` java"><code class="java">
String line = NIn.readLine();
</code></pre>
Reads a full line from the user input.
You can also provide a prompt using an NMsg:
<pre class="md-code md-code-``` java"><code class="java">
String name = NIn.readLine(NMsg.ofC("Enter your ##name##: "));
</code></pre>

<H4 class="md-title-3">Reading a Password</H4>
<pre class="md-code md-code-``` java"><code class="java">
char[] pwd = NIn.readPassword();
</code></pre>
Reads a password without echoing characters  (as far as the required extensions are loaded) to the terminal.
With prompt:
<pre class="md-code md-code-``` java"><code class="java">
char[] pwd = NIn.readPassword(NMsg.ofPlain("Password: "));
</code></pre>


<H4 class="md-title-2">Reading a Literal</H4>
<pre class="md-code md-code-``` java"><code class="java">
NLiteral lit = NIn.readLiteral();
</code></pre>
<p class="md-phrase">Reads a string input and wraps it in an <mark class="md-code md-code-` ">NLiteral</mark>, allowing you to safely extract typed values.</p>
<pre class="md-code md-code-``` java"><code class="java">
NLiteral lit = NIn.readLiteral(NMsg.ofPlain("Enter a number: "));
int value = lit.asInt().get();
</code></pre>
<p class="md-phrase">use the <code class="md-code md-code-` ">NLiteral::asXYZ</code> series of methods to convert the string input to common types like <mark class="md-code md-code-` ">double</mark>, <mark class="md-code md-code-` ">boolean</mark>, etc...</p>
<pre class="md-code md-code-``` java"><code class="java">
NLiteral lit = NIn.readLiteral(NMsg.ofPlain("Enter a number: "));
double value = lit.asDouble().get();
</code></pre>

<H4 class="md-title-2">Interactive and Typed Input with NAsk</H4>
For complex or type-safe input, NIn.ask() (or NAsk.of()) provides a fluent API to build interactive prompts with support for:
<ul class="md-ul"><li class="md-uli">Custom messages,</li><li class="md-uli">Typed inputs (String, int, boolean, enum, etc.),</li><li class="md-uli">Default values,</li><li class="md-uli">Validators,</li><li class="md-uli">Accepted values,</li><li class="md-uli">Password input,</li><li class="md-uli">"Remember me" options,</li><li class="md-uli">Custom parsing and formatting.</li></ul>
It will re-prompt indefinitely until a valid input is provided, based on type and validation constraints, or until the user cancels the prompt (e.g., by sending an interrupt like Ctrl+C or entering an empty value when allowed).
NAsk will re-prompt indefinitely in an interactive loop until:
<ul class="md-ul"><li class="md-uli">A valid value is provided (based on expected type and validation),</li><li class="md-uli">Or the user explicitly cancels the prompt (e.g., by interrupting input or when input is blank and optional). This ensures reliable and robust user interaction with clear guidance and fallback behavior.</li></ul>
<H4 class="md-title-3">Password Input Example</H4>
<pre class="md-code md-code-``` java"><code class="java">
char[] password = NAsk.of()
.forPassword(NMsg.ofPlain("Password for user " + user))
.getValue();
</code></pre>
Prompts for a password securely (input not echoed), and returns a char[].

<H4 class="md-title-3">Boolean Confirmation with Context</H4>
<pre class="md-code md-code-``` java"><code class="java">
boolean usePcp = NAsk.of()
.forBoolean(
NMsg.ofPlain(
remote
? "Use PCP users the same as the instances hosts users?"
: "Use PCP user as the same as the current user?"
)
)
.getValue();
</code></pre>
Prompts the user with a yes/no question.

<H4 class="md-title-3">"Remember Me" with Default</H4>
<pre class="md-code md-code-``` java"><code class="java">
boolean override = NAsk.of()
    .setDefaultValue(true)
    .setRememberMeKey(
        rememberMeKey == null ? null : ("Override." + rememberMeKey)
    )
    .forBoolean(
        NMsg.ofC("Override %s?",
            NText.ofStyled(
                betterPath(out.toString()),
                NTextStyle.path()
            )
        )
    )
    .getBooleanValue();
</code></pre>
This example:
<ul class="md-ul"><li class="md-uli">Proposes a default answer (true),</li><li class="md-uli">Persists the answer under the given key (rememberMeKey), so the question may be skipped next time,</li><li class="md-uli">Uses styled output in the question message.</li></ul>

<H4 class="md-title-3">Custom Validation Example</H4>
<pre class="md-code md-code-``` java"><code class="java">
String mainClass = NAsk.of()
    .forString(NMsg.ofNtf("Enter the name or index:"))
    .setValidator((value, question) -&gt; {
        Integer index = NLiteral.of(value).asInt().orNull();
        if (index != null &amp;&amp; index &gt;= 1 &amp;&amp; index &lt;= possibleClasses.size()) {
            return possibleClasses.get(index - 1);
        }
        if (possibleClasses.contains(value)) {
            return value;
        }
        throw new NValidationException(); // Triggers re-prompt
    })
    .getValue();
</code></pre>

<H4 class="md-title-3">NAsk Supported NAsk Features</H4>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">forString(...)</code>	Prompt for a String</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">forInt(...)</code>	Prompt for an int</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">forDouble(...)</code>	Prompt for a double</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">forBoolean(...)</code>	Prompt for a boolean (yes/no, true/false)</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">forEnum(Class&lt;E&gt; enumType, ...)</code>	Prompt for an enum value</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">forPassword(...)</code>	Prompt for a password (char[])</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setDefaultValue(T)</code>	Sets a default value used when input is blank</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setHintMessage(NMsg)</code>	Displays hint under the question</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setAcceptedValues(List&lt;Object&gt;)</code>	Restricts accepted values and may display suggestions</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setRememberMeKey(String)</code>	Automatically stores and reuses the answer based on a key</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setValidator(NAskValidator&lt;T&gt;)</code>	Adds input validation logic</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setParser(NAskParser&lt;T&gt;)</code>	Custom parsing from String to T</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setFormat(NAskFormat&lt;T&gt;)</code>	Custom formatting of expected values for user display</p></li></ul>

<H4 class="md-title-3">NAsk Re-prompting Behavior</H4>
NAsk will loop until a valid answer is provided, according to:
<ul class="md-ul"><li class="md-uli">Type expectations (e.g., integer, enum),</li><li class="md-uli">Custom validators (if any),</li><li class="md-uli">Accepted values (if defined).</li></ul>
This ensures robust, user-friendly interaction without premature failure.




                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="UE8BC516671A96C01E7FC60E2D2DA567157D19495" >
                                <h3 class="main-section2"><a href="#U7C379992D01E78C455F1084979BA374510906A84">2.7 NLog for elegant Logging</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-1"><p class="md-phrase"><mark class="md-code md-code-` ">NLog</mark> — Structured Developer Logging in Nuts</p></H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NLog</mark> is the structured, developer-oriented logging API in <b class="md-bold">Nuts</b>, designed for internal application diagnostics, debugging, and traceability. It complements user-facing output tools like <mark class="md-code md-code-` ">NOut</mark> and <mark class="md-code md-code-` ">NTrace</mark>, offering <b class="md-bold">fine-grained control</b>, <b class="md-bold">customizable log levels</b>, and <b class="md-bold">semantic logging verbs</b>.</p>
<hr class="divider" class="md-hr"/>
<H4 class="md-title-2">🔧 Basic Usage</H4>
You can obtain a logger using:
<pre class="md-code md-code-``` java"><code class="java">
NLog log = NLog.of(MyClass.class);
</code></pre>
Then log messages with a semantic level:
<pre class="md-code md-code-``` java"><code class="java">
log.error(NMsg.ofC("[%s] not yet supported", featureName));
log.warn(NMsg.ofC("Slow lock file: waited %s on %s", duration, path));
</code></pre>
Log methods include:
<ul class="md-ul"><li class="md-uli"><code class="md-code md-code-` ">log.info(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">log.warn(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">log.error(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">log.debug(...)</code></li><li class="md-uli"><code class="md-code md-code-` ">log.trace(...)</code></li></ul>
<p class="md-phrase">All accept an <mark class="md-code md-code-` ">NMsg</mark>, or lazily supplied via <code class="md-code md-code-` ">Supplier&lt;NMsg&gt;</code>.</p>

<H4 class="md-title-2">Structured Logging with Verbs and Levels</H4>
Each log message can include:
<ul class="md-ul"><li class="md-uli"><p class="md-phrase">A standard log level: <mark class="md-code md-code-` ">SEVERE</mark>, <mark class="md-code md-code-` ">WARNING</mark>, <mark class="md-code md-code-` ">INFO</mark>, <mark class="md-code md-code-` ">CONFIG</mark>, <mark class="md-code md-code-` ">FINE</mark>, <mark class="md-code md-code-` ">FINER</mark>, <mark class="md-code md-code-` ">FINEST</mark>, etc.</p></li><li class="md-uli"><p class="md-phrase">A semantic verb (e.g., <mark class="md-code md-code-` ">READ</mark>, <mark class="md-code md-code-` ">START</mark>, <mark class="md-code md-code-` ">FAIL</mark>, <mark class="md-code md-code-` ">CACHE</mark>, etc.) to describe the nature of the event.</p></li></ul>

<H4 class="md-title-2">Generic Log Example</H4>
<pre class="md-code md-code-``` java"><code class="java">
log.log(Level.INFO, NLogVerb.ADD, NMsg.ofPlain("Added new configuration entry"), null);
</code></pre>
<pre class="md-code md-code-``` java"><code class="java">
log.log(
    Level.FINE,
    NLogVerb.UPDATE,
    () -&gt; NMsg.ofC("Updated setting: %s", key),
    () -&gt; null
);
</code></pre>

<H4 class="md-title-2">Common NLogVerb Values</H4>
<p class="md-phrase"><mark class="md-code md-code-` ">NLogVerb</mark> adds semantic meaning to logs beyond plain text:</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">INFO</mark>	Informational messages</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">DEBUG</mark>	Debug-level messages</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">START</mark>	Start of an operation</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">SUCCESS</mark>	Successful end of an operation</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">FAIL</mark>	Operation failure</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">WARNING</mark>	Warnings</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">READ</mark>	Read/access events</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">UPDATE</mark>	State or file updates</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">ADD</mark>	Resource addition</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">REMOVE</mark>	Resource removal</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">CACHE</mark>	Cache-related operations</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">PROGRESS</mark>	Ongoing task progress</p></li></ul>
<p class="md-phrase">You can define custom verbs using <code class="md-code md-code-` ">NLogVerb.of("CUSTOM_VERB")</code>.</p>

<H4 class="md-title-2">Fluent Logging with NMsg</H4>
<p class="md-phrase">For advanced logging, use the fluent builder API with <code class="md-code md-code-` ">.withXYZ()</code> :</p>
<pre class="md-code md-code-``` java"><code class="java">
log
    .log(
            NMsg.ofC("[%s] %s", action, NCmdLine.of(context.getCommand()))
            .withLlevel(Level.FINER)
            .withIntent(NMsgIntent.START)
        );
</code></pre>
Supports:
<ul class="md-ul"><li class="md-uli">Setting level (withLevel(...))</li><li class="md-uli">Adding a verb (withIntent(...))</li><li class="md-uli">Attaching exceptions (withThrowable(Throwable))</li><li class="md-uli">Attaching per uration (withDurationMs(Throwable))</li><li class="md-uli">Final logging (log(...))</li></ul>

<H4 class="md-title-2">Example with Exception</H4>
<pre class="md-code md-code-``` java"><code class="java">
NLog.of(Nsh.class)
    .log(NMsg.ofC("Error resolving history file: %s", history.getHistoryFile())
        .withError(ex)
    );
// equivalent
NLog.of(Nsh.class)
    .log(NMsg.ofC("Error resolving history file: %s", history.getHistoryFile())
        .withLevel(Level.SEVERE)
        .withIntent(NMsgIntent.FAIL)
        .withThrowable(ex)
    );
</code></pre>

<H4 class="md-title-2">Output Destinations</H4>
By default, NLog messages are rendered to:
<ul class="md-ul"><li class="md-uli">Standard error (NSession.err()), so they remain separate from user output.</li><li class="md-uli">And/or a workspace log file, depending on the session configuration.</li></ul>
This ensures that logs:
<ul class="md-ul"><li class="md-uli">Do not pollute standard output (NOut, NTrace),</li><li class="md-uli">Can be persisted and analyzed later if needed,</li><li class="md-uli">Can be redirected or filtered using Nuts session capabilities.</li></ul>
<div class="alert alert-success mb-4">You can customize log destinations by configuring the NSession, such as redirecting logs to files, suppressing error output, or adjusting verbosity.

</div>

<H4 class="md-title-2">Why NLog + NMsg Is Unique</H4>
In most Java logging frameworks:
<ul class="md-ul"><li class="md-uli">Message formatting is tied to string interpolation styles (e.g., SLF4J uses {} placeholders, Java Logging uses {0}, Log4j2 can use %s, etc.).</li><li class="md-uli">You must format messages manually for each logging backend, or risk inconsistent logs.</li><li class="md-uli">Structured output (e.g., JSON logs, table views) requires extra work or third-party wrappers.</li></ul>
With NLog, this complexity disappears: You write once with NMsg:
<pre class="md-code md-code-``` java"><code class="java">
log.warn(NMsg.ofC("File %s could not be read", path));
</code></pre>
Or:
<pre class="md-code md-code-``` java"><code class="java">
log.info(NMsg.ofJ("User {0} logged in at {1}", username, timestamp));
</code></pre>
Or with variables:
<pre class="md-code md-code-``` java"><code class="java">
log.debug(NMsg.ofV("Downloading $file to $path", NMaps.of("file", id, "path", target)));</code></pre>
<code class="md-code md-code-``` "></code>
Then the rendering adapts to the output:
<ul class="md-ul"><li class="md-uli">CLI (NTF) → colored and styled</li><li class="md-uli">File → plain text</li><li class="md-uli">JSON → structured representation</li><li class="md-uli">GUI → rich visual log viewers</li><li class="md-uli">Remote API → formatted strings or JSON</li></ul>

<H4 class="md-title-2">Summary</H4>
<ul class="md-ul"><li class="md-uli">Use NLog for developer-focused internal logs.</li><li class="md-uli">Use NOut/NTrace for user-facing messages.</li><li class="md-uli">Attach semantic verbs (NLogVerb) to add context.</li><li class="md-uli">Use NMsg for structured, styled messages.</li><li class="md-uli">Use .with() for flexible, readable, builder-style logging.</li></ul>
This makes NLog an ideal logging facility for modular, structured, and contextual diagnostics in the Nuts platform.



                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                    </section>
                    <hr class="divider">
                
                    <!--pageLevel1-->
                    <section id="U0EE72504B95CF09F31BCDBCA8872FC4F8C42FC8A" >
                        <h2 class="main-section1"><a href="#U0EE72504B95CF09F31BCDBCA8872FC4F8C42FC8A">3 Sessions and Workspaces</a></h2>
                        <div class="text-card">
                        <p class="md-phrase"><mark class="md-code md-code-` ">NWorkspace</mark> and <mark class="md-code md-code-` ">NSession</mark> are the <b class="md-bold">foundation of Nuts runtime context</b>. Understanding how they work is essential for correctly using all Nuts components.</p>
<H4 class="md-title-2"><p class="md-phrase">What is a <mark class="md-code md-code-` ">NWorkspace</mark>?</p></H4>
<p class="md-phrase">A <mark class="md-code md-code-` ">NWorkspace</mark> represents the <b class="md-bold">application context</b> and <b class="md-bold">component container</b> in Nuts. It is:</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase">Comparable to a Spring <mark class="md-code md-code-` ">ApplicationContext</mark>,</p></li><li class="md-uli"><p class="md-phrase">A container for all globally or locally scoped Nuts services (like <mark class="md-code md-code-` ">NOut</mark>, <mark class="md-code md-code-` ">NLog</mark>, <mark class="md-code md-code-` ">NWorkspaceService</mark>, etc.),</p></li><li class="md-uli"><p class="md-phrase">Required for all operations using Nuts APIs — at any moment, a Nuts component is always used <b class="md-bold">in the context of a workspace</b>.</p></li></ul>
<hr class="divider" class="md-hr"/>

<H4 class="md-title-2"><p class="md-phrase">What is a <mark class="md-code md-code-` ">NSession</mark>?</p></H4>
<p class="md-phrase">A <mark class="md-code md-code-` ">NSession</mark> is a <b class="md-bold">lightweight, thread-scoped execution context</b> associated with a <mark class="md-code md-code-` ">NWorkspace</mark>. It:</p>
<ul class="md-ul"><li class="md-uli">Controls options like verbosity, trace mode, output streams, and more,</li><li class="md-uli"><p class="md-phrase">Is <b class="md-bold">thread-local</b> by default and can be inherited by child threads,</p></li><li class="md-uli">Provides runtime configuration for rendering, formatting, user input, log levels, etc.</li></ul>
<p class="md-phrase">Any Nuts operation (e.g., <code class="md-code md-code-` ">NOut.println(...)</code>) implicitly uses the current <mark class="md-code md-code-` ">NSession</mark>, and therefore accesses the <mark class="md-code md-code-` ">NWorkspace</mark> bound to it.</p>
<hr class="divider" class="md-hr"/>


                        </div>
                        
                            <!--pageLevel2-->
                            <section id="U1CB8C467A335A369B7D22A43E2248BDB30E5C549" >
                                <h3 class="main-section2"><a href="#U0EE72504B95CF09F31BCDBCA8872FC4F8C42FC8A">3.1 NWorkspace</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-2">Opening and Sharing Workspaces</H4>
<H4 class="md-title-3">Default (global) workspace</H4>
<pre class="md-code md-code-``` java"><code class="java">
NWorkspace.require();
</code></pre>
<ul class="md-ul"><li class="md-uli">Returns the currently shared (global) workspace if one exists.</li><li class="md-uli">If no global workspace is present, creates and shares one by delegating to</li></ul>
<pre class="md-code md-code-``` java"><code class="java">
Nuts.openWorkspace("--reset-options", "--in-memory").share();
</code></pre>
This ensures that a workspace is always available, without requiring manual setup.
<div class="alert alert-success mb-4">This workspace is in-memory and ignores any inherited CLI options (--reset-options).  It’s ideal for quick use cases, testing, or tools that need a minimal setup.

</div>


<H4 class="md-title-2">Scoped (local) workspace</H4>
If you need isolation or temporary workspace setup:
<pre class="md-code md-code-``` java"><code class="java">
Nuts.openWorkspace().runWith(() -&gt; {
        // This code runs inside a thread-local scoped workspace
        // Nuts components here use the scoped context
        });
</code></pre>
<ul class="md-ul"><li class="md-uli">Temporarily hides the global workspace inside the block,</li><li class="md-uli">Scoped workspace is available in current and inherited threads,</li><li class="md-uli">Ideal for frameworks, sandboxing, plugins and testing.</li><li class="md-uli">Nuts.openWorkspace() uses persistent location (across processes) unless --in-memory is passed.</li></ul>

<H4 class="md-title-2">Sharing workspace globally</H4>
To explicitly promote a workspace to global:
<pre class="md-code md-code-``` java"><code class="java">
Nuts.openWorkspace().share();
</code></pre>
You may also customize it before sharing:
<pre class="md-code md-code-``` java"><code class="java">
Nuts.openWorkspace("--in-memory", "--color").share();
</code></pre>

<H4 class="md-title-2">Environment & System Info</H4>
Workspaces provide access to environment metadata:
NWorkspace ws = NWorkspace.current();
<pre class="md-code md-code-``` java"><code class="java">
ws.getHostName();               // Host name
ws.getPid();                    // Process ID
ws.getOsFamily();               // Linux, Windows, Mac, etc.
ws.getShellFamily();            // bash, cmd, powershell, etc.
ws.getPlatform();               // Java, Android, etc.
ws.getOs();                     // Full OS ID
ws.getOsDist();                 // OS distribution (e.g. Ubuntu)
ws.getArch();                   // CPU architecture (e.g. amd64)
ws.getArchFamily();            // Arch family (e.g. x86_64)
ws.getDesktopEnvironment();     // Gnome, KDE, etc.
ws.getDesktopEnvironmentFamily(); // Gnome-like, etc.
ws.isGraphicalDesktopEnvironment(); // true if graphical session
</code></pre>
You can also list all available shell families or desktop environments:
<pre class="md-code md-code-``` java"><code class="java">
ws.getShellFamilies(); // e.g. [BASH, ZSH, CMD]
ws.getDesktopEnvironments(); // List of detected environments
</code></pre>

<H4 class="md-title-2">Accessing the Current Workspace</H4>
To retrieve the current NWorkspace (i.e., the one bound to the current thread context), you have two options:

<H4 class="md-title-2">Elegant, fail-fast access</H4>
<pre class="md-code md-code-``` java"><code class="java">
NWorkspace ws = NWorkspace.of();
</code></pre>
<ul class="md-ul"><li class="md-uli">Returns the current workspace if one is available,</li><li class="md-uli">Throws an exception if no workspace is present,</li><li class="md-uli">Recommended when a workspace is expected to exist.</li><li class="md-uli">Equivalent to NWorkspace.get().get() but more expressive and fails clearly.</li></ul>

<H4 class="md-title-2">Safe, optional access</H4>
<pre class="md-code md-code-``` java"><code class="java">
Optional&lt;NWorkspace&gt; wsOpt = NWorkspace.get();
</code></pre>
<ul class="md-ul"><li class="md-uli">Returns an NOptional
null
</li></ul>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="UFA5D484551139171A2F200AFD643E79DF0DCA775" >
                                <h3 class="main-section2"><a href="#U0EE72504B95CF09F31BCDBCA8872FC4F8C42FC8A">3.2 NSession</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><mark class="md-code md-code-` ">NSession</mark> defines the current execution context within a Nuts <mark class="md-code md-code-` ">NWorkspace</mark>. It encapsulates:</p>
<ul class="md-ul"><li class="md-uli">Command-line options</li><li class="md-uli">User preferences</li><li class="md-uli">Output formatting</li><li class="md-uli">Trace/log verbosity</li><li class="md-uli">Interactive modes</li><li class="md-uli">Runtime state</li></ul>
<p class="md-phrase">Every operation within <mark class="md-code md-code-` ">Nuts</mark> is executed in the scope of a <mark class="md-code md-code-` ">NSession</mark>.</p>
<H4 class="md-title-2">Getting the Current Session</H4>
<H4 class="md-title-3">Elegant (fail-fast)</H4>
<pre class="md-code md-code-``` java"><code class="java">
    NSession session = NSession.of();
</code></pre>

<H4 class="md-title-3">Safe (optional)</H4>
<pre class="md-code md-code-``` java"><code class="java">
Optional&lt;NSession&gt; opt = NSession.get();
</code></pre>
Returns an Optional session, or empty if not available.


<H4 class="md-title-2">What Does a Session Do?</H4>
<ul class="md-ul"><li class="md-uli">Holds contextual flags like --trace, --yes, --bot, --dry, --confirm</li><li class="md-uli">Controls output formatting: plain, json, xml, tree, table, etc.</li><li class="md-uli">Configures confirmation/interaction modes</li><li class="md-uli">Tracks fetch/cache strategies and expiration</li><li class="md-uli">Controls repository settings</li><li class="md-uli">Defines runtime identity (root(), sudo(), etc.)</li></ul>

<H4 class="md-title-2">Thread-Scoped Context</H4>
NSession is thread-local and inherited by spawned threads unless explicitly changed. To run with a different session:
<pre class="md-code md-code-``` java"><code class="java">
session.runWith(() -&gt; {
    // Executes within the session context
});
</code></pre>
Or return a result:
<pre class="md-code md-code-``` java"><code class="java">
String result = session.callWith(() -&gt; computeSomething());
</code></pre>

<H4 class="md-title-2">Common Flags and States</H4>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">--trace</mark>	<code class="md-code md-code-` ">isTrace()</code>	Enables trace-mode output</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">--yes</mark>	<code class="md-code md-code-` ">isYes()</code>	Assume “yes” for confirmations</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">--no</mark>	<code class="md-code md-code-` ">isNo()</code>	Assume “no” for confirmations</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">--ask</mark>	<code class="md-code md-code-` ">isAsk()</code>	Always ask for confirmation</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">--bot</mark>	<code class="md-code md-code-` ">isBot()</code>	Enable non-interactive/script mode</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">--dry</mark>	<code class="md-code md-code-` ">isDry()</code>	Dry-run only, no actual execution</p></li></ul>

<H4 class="md-title-2">Output Format</H4>
<pre class="md-code md-code-``` java"><code class="java">
Control the rendering format of structured output:
session.json();     // JSON
session.table();    // Tabular
session.tree();     // Tree
session.xml();      // XML
session.props();    // Properties
session.plain();    // Default/plain text
</code></pre>
<p class="md-phrase">Output formats affect rendering of <code class="md-code md-code-` ">NOut.println(...)</code>, logging, tables, etc.</p>

<H4 class="md-title-2">Streams Access</H4>
Each session controls its I/O streams (also accessible via NOut, NErr and NIn):
<pre class="md-code md-code-``` java"><code class="java">
session.out().println("Standard Output");
session.err().println("Error Output");
session.in().readLine();
</code></pre>
This enables custom I/O redirection (e.g., GUI, files, remote shells).

<H4 class="md-title-2">Trace Modes</H4>
Trace mode activates auxiliary output useful for end users (not developers):
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">isPlainTrace()</code>: plain-text trace</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">isIterableTrace()</code>: structured trace with iterable format</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">isStructuredTrace()</code>: structured trace without iterable mode</p></li></ul>
<pre class="md-code md-code-``` java"><code class="java">
if (session.isTrace()) {
    NOut.println("Tracing enabled...");
}
// same as
NTrace.println("Tracing enabled...");
</code></pre>

<H4 class="md-title-2">Dependency Resolution Options And Fetch Strategy</H4>
Used when resolving artifacts and loading jars from repositories (dynamic classloading)
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">isTransitive()</code>	Use transitive repositories</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">isCached()</code>	Use cached data when possible</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">isIndexed()</code>	Use indexed metadata</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">getExpireTime()</code>	Expire cache before this date</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setFetchStrategy()</code>	Customize fetch strategy</p></li></ul>
<pre class="md-code md-code-``` java"><code class="java">
session.setFetchStrategy(NFetchStrategy.ONLINE);
</code></pre>
The fetch strategy determines how and where Nuts searches for artifacts (e.g., dependencies, packages) across local and remote repositories.
This affects resolution against repositories such as Maven Central, Nuts-based repositories, and custom remotes.
<H4 class="md-title-3">🔎 Available Strategies</H4>
<table class="table table-bordered table-striped"><tr><th>Strategy</th>
<th>Description</th>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">ONLINE</mark>   </p></td>
<td>Default mode. Searches locally first; if not found, falls back to remotes.</td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">OFFLINE</mark>  </p></td>
<td><p class="md-phrase"> Searches <b class="md-bold">only local caches</b>. No remote access is allowed.               </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">ANYWHERE</mark> </p></td>
<td><p class="md-phrase"> Searches both <b class="md-bold">local and remote</b> repositories concurrently.              </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">REMOTE</mark>   </p></td>
<td><p class="md-phrase"> Searches <b class="md-bold">only remote</b> repositories, ignoring local cache.               </p></td>
</tr>
</table>


<H4 class="md-title-2">Confirmation and Interaction</H4>
Control how user prompts are handled:
<pre class="md-code md-code-``` java"><code class="java">
session.yes();              // Force auto-yes
session.no();               // Force auto-no
session.ask();              // Always prompt

session.setConfirm(NConfirmationMode.YES);
</code></pre>

<H4 class="md-title-2">Interactive Session Features</H4>
Enable/disable progress output:
<pre class="md-code md-code-``` java"><code class="java">
session.setProgressOptions("auto");
</code></pre>

<H4 class="md-title-2">Control GUI/headless:</H4>
<pre class="md-code md-code-``` java"><code class="java">
session.setGui(true);
</code></pre>
<p class="md-phrase">The <mark class="md-code md-code-` ">gui</mark> flag in a session determines whether user interactions should be performed using <b class="md-bold">graphical UI dialogs</b> or <b class="md-bold">standard console input</b>.</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase">When <mark class="md-code md-code-` ">gui</mark> is <b class="md-bold">enabled</b>, interactive methods like <code class="md-code md-code-` ">NIn.readLine()</code> or <code class="md-code md-code-` ">NIn.ask()</code> may display <b class="md-bold">graphical dialogs</b> for input instead of using the terminal.</p></li><li class="md-uli"><p class="md-phrase">When <mark class="md-code md-code-` ">gui</mark> is <b class="md-bold">disabled</b> (default in headless or CLI environments), all interactions fall back to <b class="md-bold">console-based prompts</b>.</p></li></ul>
<div class="alert alert-success mb-4">In GUI-enabled environments, this may pop up a dialog window rather than prompting in the console.

</div>

<H4 class="md-title-2">Customize output line prefixes:</H4>
<pre class="md-code md-code-``` java"><code class="java">
session.setOutLinePrefix("[out] ");
session.setErrLinePrefix("[err] ");
</code></pre>

<H4 class="md-title-2">Sample Use Case</H4>
<pre class="md-code md-code-``` java"><code class="java">
NSession session = NSession.of().json().setTrace(true);
List&lt;MyObject&gt; data = ...;
NOut.out(session).println(data);  // will output JSON trace if enabled

</code></pre>

<H4 class="md-title-2">Advanced Configuration</H4>
You can clone and configure sessions:
<pre class="md-code md-code-``` java"><code class="java">
NSession childSession = session.copy()
        .setOutputFormat(NContentType.XML)
        .setBot(true)
        .setTrace(false);
        
</code></pre>

<H4 class="md-title-2">Redirecting Session Streams (Advanced I/O Control)</H4>
Nuts allows you to redirect the I/O streams of a session to memory, files, or custom terminals. This is especially useful for scripting, capturing outputs programmatically, or testing. You can run a block of code using a customized session that redirects output to memory.  This is useful for capturing the result of structured rendering (e.g., JSON, XML, table) without printing it to the console. Example:
<pre class="md-code md-code-``` java"><code class="java">
String result = NSession.of().copy()
    .setTerminal(NTerminal.ofMem())     // redirect all I/O to memory
    .callWith(() -&gt; {
        NSession.of().json();           // structured output (e.g., JSON)
        NOut.println(Arrays.asList("a", "b", "c"));
        return NOut.out().toString();   // retrieve the rendered output as string
    });
</code></pre>
Explanation: 
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">setTerminal(NTerminal.ofMem())</code>: uses an in-memory terminal for all I/O</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">NSession.of().json()</code>: sets the output format to JSON</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">NOut.println(...)</code>: renders the list to the output stream</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">NOut.out().toString()</code>: fetches the printed result from memory</p></li></ul>
<div class="alert alert-success mb-4">This technique is useful when you want to render structured output for internal use (e.g., passing to another API or storing in a log file),  rather than displaying it directly.

</div>

<H4 class="md-title-2">Log Configuration</H4>
Control logging levels and filters:
<pre class="md-code md-code-``` java"><code class="java">
session.setLogTermLevel(Level.INFO);
session.setLogFileLevel(Level.FINE);
session.setLogFilter(log -&gt; log.getVerb().equals(NLogVerb.FAIL));
</code></pre>

<H4 class="md-title-2">Listeners</H4>
Register and listen to session/workspace events:
<pre class="md-code md-code-``` java"><code class="java">
session.addListener(new NWorkspaceListener() {
...
});
</code></pre>
Supported listener types:
<ul class="md-ul"><li class="md-uli">NWorkspaceListener</li><li class="md-uli">NRepositoryListener</li><li class="md-uli">NInstallListener</li><li class="md-uli">NObservableMapListener</li></ul>

<H4 class="md-title-2">Best Practices</H4>
<ul class="md-ul"><li class="md-uli">Use NSession.of() only when you're sure a session context exists</li><li class="md-uli">Always configure session flags (--yes, --bot, etc.) when parsing application commandlines</li></ul>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                    </section>
                    <hr class="divider">
                
                    <!--pageLevel1-->
                    <section id="U2313F5F2E8C307BE6A7E02AC3F845FB201152BCE" >
                        <h2 class="main-section1"><a href="#U2313F5F2E8C307BE6A7E02AC3F845FB201152BCE">4 Files and Paths</a></h2>
                        <div class="text-card">
                        The Nuts ecosystem provides a comprehensive set of tools designed to simplify and unify file and resource management across different protocols and formats.
What Nuts Supports
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NPath</mark>: A versatile path abstraction that extends beyond traditional file system paths. It supports local files, URLs (HTTP/HTTPS), classpath resources, and Maven-style artifact resources. This unified API enables seamless access and manipulation of diverse resource types.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NCp</mark>: An advanced copying utility capable of copying files and directories with support for validation, progress tracking, overwrite policies, and more. It provides robust features to reliably transfer resources locally or remotely.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NCompress</mark> / NUncompress: Utilities to compress and decompress files and folders using popular archive formats such as ZIP and TAR. These tools handle format detection, filtering, and extraction/compression workflows transparently.</p></li><li class="md-uli"><p class="md-phrase"><mark class="md-code md-code-` ">NDigest</mark>: A digest computation tool for calculating checksums and hashes (e.g., SHA-256) of files, streams, and folders. It supports integrity verification and recursive digesting to ensure file content authenticity.</p></li></ul>
Together, these components offer a flexible and powerful framework to interact with files and resources efficiently, whether for local development or distributed environments.
    

                        </div>
                        
                            <!--pageLevel2-->
                            <section id="U8640EDB78ACA255A91293F1405D0FAB2955CD709" >
                                <h3 class="main-section2"><a href="#U2313F5F2E8C307BE6A7E02AC3F845FB201152BCE">4.1 NPath</a></h3>
                                <div class="text-card">
                                NPath is a powerful abstraction introduced by nuts to handle paths in a uniform way, similar to Java's URL, but with extended capabilities, built-in protocol support, and a fluent, intuitive API.
<H4 class="md-title-1">Key Features</H4>
<ul class="md-ul"><li class="md-uli">Unified path abstraction for local files, URLs, classpath resources, and artifacts.</li><li class="md-uli">Protocol-aware: supports file, http(s), classpath, and resource URLs.</li><li class="md-uli">Stream access, input/output helpers, and file tree navigation.</li><li class="md-uli">Support for creating temporary files/folders and content manipulation.</li></ul>
<H4 class="md-title-2">Supported Protocols</H4>
<ul class="md-ul"><li class="md-uli">File paths: "/path/to/resource", "C:\path\to\resource"</li><li class="md-uli">File URLs: "file:/path/to/resource", "file:C:/path/to/resource"</li><li class="md-uli">HTTP/HTTPS URLs: "http://...", "https://..."</li><li class="md-uli">Ssh URLs: "ssh://user@server/path/to/resource"</li><li class="md-uli">Classpath: "classpath:/path/to/resource" (requires classloader)</li><li class="md-uli">Resource paths: "resource://group:artifact#version/path/to/resource"</li></ul>

<H4 class="md-title-2">Creating an NPath</H4>
<pre class="md-code md-code-``` java"><code class="java">
NPath localFile = NPath.of("C:/path/to/resource");
</code></pre>

<H4 class="md-title-2">Other creation methods include:</H4>
<pre class="md-code md-code-``` java"><code class="java">
NPath.of(URL url);
NPath.of(File file);
NPath.of(Path path);
NPath.of(String path, ClassLoader cl);
NPath.of(NConnexionString connection);
</code></pre>

<H4 class="md-title-2">Special Locations</H4>
<pre class="md-code md-code-``` java"><code class="java">
NPath.ofUserHome();         // User home directory
NPath.ofUserDirectory();    // Current working directory
NPath.ofUserStore(type);    // User store path
NPath.ofSystemStore(type);  // System store path
</code></pre>

<H4 class="md-title-2">NPath.ofUserStore(NStoreType storeType)</H4>
Returns the path to the user-specific store folder of the given storeType.
This method is used to access various predefined storage locations that conform to standard OS conventions (such as XDG Base Directory Specification on Linux). These locations are used to store user-specific data in structured, OS-compliant folders.
Example:
<pre class="md-code md-code-``` java"><code class="java">
NPath configFolder = NPath.ofUserStore(NStoreType.CONF);
System.out.println("User config path: " + configFolder);
</code></pre>
<H4 class="md-title-3"><p class="md-phrase">Supported <mark class="md-code md-code-` ">NStoreType</mark>s</p></H4>
<p class="md-phrase">Each <mark class="md-code md-code-` ">NStoreType</mark> corresponds to a logical category of user data:</p>
<table class="table table-bordered table-striped"><tr><th>StoreType</th>
<th>Purpose</th>
<th>Typical Usage</th>
<th>Linux Equivalent</th>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">BIN</mark>     </p></td>
<td>Stores user-specific executable binaries (non-modifiable).</td>
<td>Custom installed commands/tools.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$HOME/.local/bin</code> </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">CONF</mark>    </p></td>
<td>Stores user-specific configuration files.</td>
<td>App or tool settings, preferences.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$XDG_CONFIG_HOME</code> or <code class="md-code md-code-` ">$HOME/.config</code> </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">VAR</mark>     </p></td>
<td>Stores user-specific modifiable data.</td>
<td>Data files, downloaded content.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$XDG_DATA_HOME</code> or <code class="md-code md-code-` ">$HOME/.local/share</code> </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">LOG</mark>     </p></td>
<td>Stores log files.</td>
<td>Runtime logs, audit trails.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$XDG_LOG_HOME</code> or <code class="md-code md-code-` ">$HOME/.local/log</code> </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">TEMP</mark>    </p></td>
<td>Stores temporary files.</td>
<td>Temp input/output files.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$TMPDIR</code>, <code class="md-code md-code-` ">/tmp</code>, or equivalent </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">CACHE</mark>   </p></td>
<td>Stores non-essential cache files.</td>
<td>Cached packages, resources.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$XDG_CACHE_HOME</code> or <code class="md-code md-code-` ">$HOME/.cache</code> </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">LIB</mark>     </p></td>
<td>Stores user-specific non-executable binaries.</td>
<td>Local libraries and dependencies.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$HOME/.local/lib</code> </p></td>
</tr>
<tr><td><p class="md-phrase"> <mark class="md-code md-code-` ">RUN</mark>     </p></td>
<td>Stores runtime file system entries.</td>
<td>Sockets, pipes, PID files.</td>
<td><p class="md-phrase"> <code class="md-code md-code-` ">$XDG_RUNTIME_DIR</code> or <code class="md-code md-code-` ">/run/user/&lt;uid&gt;</code> </p></td>
</tr>
</table>

<H4 class="md-title-3">Why Use ofUserStore()?</H4>
This method ensures:
<ul class="md-ul"><li class="md-uli">Cross-platform compatibility: Automatically maps to platform-appropriate folders.</li><li class="md-uli">Correct file placement: Keeps your workspace clean and organized.</li><li class="md-uli">Portable behavior: Works reliably across Linux, Windows, and macOS.</li></ul>

<H4 class="md-title-3">Advanced Example: Write to User Log Folder</H4>
<pre class="md-code md-code-``` java"><code class="java">
NPath logFile = NPath.ofUserStore(NStoreType.LOG).resolve("myapp.log");
logFile.writeString("This is a log entry.\n", StandardCharsets.UTF_8);
</code></pre>
<div class="alert alert-success mb-4">Notes : You can get the resolved directory path as a string via getLocation() or toString().

</div>
<div class="alert alert-success mb-4">Notes : If you're working in a system context (e.g. root user or shared tools), consider NPath.ofSystemStore(NStoreType).

</div>


<H4 class="md-title-2">Browsing HTML Folders</H4>
Supports Apache Tomcat and Apache Httpd directory listings.
<pre class="md-code md-code-``` java"><code class="java">
NPath httpFolder = NPath.of("htmlfs:https://archive.apache.org/dist/tomcat/");
try (NStream s = httpFolder.stream()) {
    List&lt;NPath&gt; matches = s.filter(x -&gt; x.isDirectory() &amp;&amp; x.getName().matches("tomcat-[0-9.]+"))
                            .toList();
}
</code></pre>

<H4 class="md-title-2">Working with Temp Files and Folders</H4>
<pre class="md-code md-code-``` java"><code class="java">
NPath tempFile = NPath.ofTempFile("example.txt");
NPath tempFolder = NPath.ofTempFolder("project-workspace");
</code></pre>
Also supports temp locations for repositories and artifact ids:
<pre class="md-code md-code-``` java"><code class="java">
NPath.ofTempRepositoryFile("temp.txt", repository);
NPath.ofTempIdFolder(id);
</code></pre>

<H4 class="md-title-2">Content I/O</H4>
Reading:
<pre class="md-code md-code-``` java"><code class="java">
byte[] data = path.readBytes();
String content = path.readString();
</code></pre>
Writing:
<pre class="md-code md-code-``` java"><code class="java">
path.writeBytes(data);
path.writeString("Hello World");
</code></pre>
Writing Structured Objects:
<pre class="md-code md-code-``` java"><code class="java">
path.writeObject(myObject);     // Any serializable
path.writeMsg(NMsg.ofText("Hi"));
</code></pre>

<H4 class="md-title-2">Path Operations</H4>
<ul class="md-ul"><li class="md-uli">resolve, resolveSibling, normalize, toAbsolute, toRelative</li><li class="md-uli">exists(), isDirectory(), isFile(), delete(), mkdir()</li><li class="md-uli">getName(), getNameCount(), getNames(), getParent()</li></ul>

<H4 class="md-title-2">File Tree</H4>
<pre class="md-code md-code-``` java"><code class="java">
path.walk();                    // DFS walk
path.walkGlob();               // Glob walk
</code></pre>

<H4 class="md-title-2">Streaming and Navigation</H4>
<pre class="md-code md-code-``` java"><code class="java">
try (NStream&lt;NPath&gt; stream = path.stream()) {
    stream.forEach(x -&gt; ...);
}
</code></pre>

<H4 class="md-title-2">Permissions & Metadata</H4>
<pre class="md-code md-code-``` java"><code class="java">
Set&lt;NPathPermission&gt; perms = path.getPermissions();
path.setPermissions(...);
</code></pre>

<H4 class="md-title-2">Type & Protocol</H4>
<pre class="md-code md-code-``` java"><code class="java">
String protocol = path.getProtocol();
boolean isFile = path.isFile();
boolean isHttp = path.isHttp();
NPathType type = path.type();
</code></pre>

<H4 class="md-title-2">Conversion</H4>
<pre class="md-code md-code-``` java"><code class="java">
URL url = path.toURL().orNull();
File file = path.toFile().orNull();
Path nioPath = path.toPath().orNull();
</code></pre>

<H4 class="md-title-2">Example: Directory Listing</H4>
<pre class="md-code md-code-``` java"><code class="java">
NPath dir = NPath.of("/my/folder");
List&lt;NPath&gt; files = dir.stream()
    .filter(p -&gt; p.getName().endsWith(".txt"))
    .toList();
</code></pre>

<H4 class="md-title-2">Summary</H4>
NPath is a versatile and protocol-aware abstraction that unifies file, URL, and resource path handling. Its rich API and Nuts integration make it ideal for building tools that require flexible resource access, remote artifact inspection, or file system utilities.



                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="U38EB11B2D23D1FD774F42D76B64CBF12D0DADD21" >
                                <h3 class="main-section2"><a href="#U2313F5F2E8C307BE6A7E02AC3F845FB201152BCE">4.2 IO: Working with files</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><b class="md-bold">nuts</b> Library allows multiple variants of string interpolation</p>
<H4 class="md-title-2">NCp</H4>
<pre class="md-code md-code-``` java"><code class="java">
    NCp.of()
        .from("http://my-server.com/file.pdf")
        .to("/home/my-file")
        .setProgressMonitor(true)
        .setValidator((in)-&gt;checkSHA1Hash(in))
        .run();

    NPs ps=NPs.of()
        if(ps.isSupportedKillProcess()){
            ps.killProcess("1234");
        }
</code></pre>

<H4 class="md-title-2">NCompress/NUncompress</H4>
<pre class="md-code md-code-``` java"><code class="java">
    NCompress aa = NCompress.of()
        .setTarget(options.outZip);
        for (NPath file : options.files) {
        aa.addSource(file);
        }
        aa.run();
        
</code></pre>
<pre class="md-code md-code-``` java"><code class="java">
    NUncompress.of()
                    .from(is)
                    .visit(new NUncompressVisitor() {
    @Override
    public boolean visitFolder(String path) {
        return true;
    }

    @Override
    public boolean visitFile(String path, InputStream inputStream) {
        if ("META-INF/MANIFEST.MF".equals(path)) {
            ...
        } else) {
            ...
        }
        return true;
    }
}).run();
</code></pre>

<H4 class="md-title-2">NDigest</H4>
<pre class="md-code md-code-``` java"><code class="java">
   String digest=NDigest.of().setSource(x.getPath().getBytes()).computeString();
}).run();
</code></pre>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                    </section>
                    <hr class="divider">
                
                    <!--pageLevel1-->
                    <section id="UBB16079C805F5B1035F84A0CDD925EA59C9A2674" >
                        <h2 class="main-section1"><a href="#UBB16079C805F5B1035F84A0CDD925EA59C9A2674">5 Nuts Utilities</a></h2>
                        <div class="text-card">
                        
                        </div>
                        
                            <!--pageLevel2-->
                            <section id="NCmdLine" >
                                <h3 class="main-section2"><a href="#UBB16079C805F5B1035F84A0CDD925EA59C9A2674">5.1 NCmdLine</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><b class="md-bold">nuts</b> provides a useful commandline parser <mark class="md-code md-code-``` ">NCmdLine</mark>   It supports command lines in the following form :</p>
<pre class="md-code md-code-``` sh"><code class="sh">
my-app -o=y --name='some name' -ex --extra value arg1 arg2
</code></pre>
<p class="md-phrase">where the command here supports short and long options (short ones are <mark class="md-code md-code-``` ">-o</mark>, <mark class="md-code md-code-``` ">-e</mark> and <mark class="md-code md-code-``` ">-x</mark>, where <mark class="md-code md-code-``` ">-e</mark> and <mark class="md-code md-code-``` ">-x</mark> are combined as <mark class="md-code md-code-``` ">-ex</mark>),  and of course non options or regular arguments (here <mark class="md-code md-code-``` ">arg1</mark> and <mark class="md-code md-code-``` ">arg2</mark>). Note also that <mark class="md-code md-code-``` ">value</mark> could be interpreted as a value for <mark class="md-code md-code-``` ">--extra</mark> (or not; depending on how you configure your parser, for  this option).</p>
<H4 class="md-title-2">Short vs Long Options</H4>
Options can be long options (starts with double hyphen) or short options (start with a single hyphen).  Many arguments support both forms. For instance "-w" and "--workspace" are the supported forms to define the workspace location in the nuts command.

<H4 class="md-title-2">Valued / Non-valued Options</H4>
Options can also support a value of type string or boolean. The value can be suffixed to the option while separated with '=' sign or immediately after the option. 
As an example, all are equivalent.  
Of course, not all options can support values, an not all options neither support the suffixed and/or the non-suffixed mode. Please relate to the documentation of nuts or the application you are using to know how to use the options.

<H4 class="md-title-2">Boolean Options</H4>
Particularly, when the value is a boolean, the value do not need to be defined. As a result "--install-companions" and "--install-companions=true" are equivalent. However "--install-companions true" is not (because the option is of type boolean) and "true" will be parsed as a NonOption.
<p class="md-phrase">To define a <mark class="md-code md-code-``` ">false</mark> value to the boolean option we can either suffix with <code class="md-code md-code-``` ">=false</code> or prefix with <code class="md-code md-code-` ">!</code> or <code class="md-code md-code-` ">~</code> sign.  Hence, <code class="md-code md-code-``` "> --install-companions=false</code>, <code class="md-code md-code-``` "> --!install-companions</code> and <code class="md-code md-code-``` "> --~install-companions</code> are all equivalent.</p>
<p class="md-phrase">Note also that <code class="md-code md-code-` ">~</code> is equivalent to <code class="md-code md-code-` ">!</code> because in bash shells (and some other shells) <code class="md-code md-code-` ">!</code> will be interpreted as expansion operator.</p>

<H4 class="md-title-2">Combo Simple Options</H4>
Simple options can be grouped in a single word. "-ls" is equivalent to "-l -s". So one should be careful.  One exception though. For portability reasons, "-version" is considered a single short option.

<H4 class="md-title-2">Ignoring Options, Comments</H4>
Options starting with "-//" and "--//" are simply ignored by the command line parser.

<H4 class="md-title-2">Creating NCmdLine</H4>
Command line can either be created manually or parsed.
You can create a command by providing the arguments:
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine c1= NCmdLine.ofArgs("ls","-l");
</code></pre>
You can also create a commandline by parsing a string.
<p class="md-phrase"><b class="md-bold">nuts</b> supports multiple commandline dialects (bash/linux, bat/Windows,...)</p>
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine c1= NCmdLine.of("ls -l", NShellFamily.BASH);
</code></pre>
When you do not specify the NShellFamily, runtime OS default is considered.
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine c1= NCmdLine.parse("ls -l");
</code></pre>
<p class="md-phrase">You would want to be portable across all operating systems, you can use <mark class="md-code md-code-``` ">ofDefault</mark> method.</p>
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine c1= NCmdLine.ofDefault("ls -l");
</code></pre>

<H4 class="md-title-2">Configuring NCmdLine</H4>
<code class="md-code md-code-` ">setCommandName(true|false)</code>
<p class="md-phrase">This method help defining the name of the command supporting this command line. This is helpful when generating errors/exception so that the message is relevant for instance, you would call <code class="md-code md-code-``` setCommandName">("ls")</code>, so that all errors are in the form of <code class="md-code md-code-``` ls:"> unexpected argument --how</code></p>
<code class="md-code md-code-` ">setExpandSimpleOptions(true|false)</code>
<p class="md-phrase">This method can change the default behavior of NCmdLine (defaulted to <mark class="md-code md-code-` ">true</mark>). When <mark class="md-code md-code-` ">true</mark>, options in the form <mark class="md-code md-code-` ">-ex</mark> are expanded to <code class="md-code md-code-` ">-e -x</code>.</p>
<code class="md-code md-code-` ">registerSpecialSimpleOption(argName)</code>
<p class="md-phrase">This method limits <mark class="md-code md-code-` ">setExpandSimpleOptions</mark> application so that for some options that start with <mark class="md-code md-code-` ">-</mark> (simple options), they are not expanded.  A useful example is '-version'. You wouldn't want it to be interpreted as '-v -e -r -s -i -o -n', would you?</p>
<code class="md-code md-code-` ">setExpandArgumentsFile(true|false)</code>
<p class="md-phrase">This method can change the default behavior of NCmdLine (defaulted to <mark class="md-code md-code-` ">true</mark>). When <mark class="md-code md-code-` ">false</mark>, options in the form <code class="md-code md-code-` ">@path/to/arg/file</code> are interpreted as non options. When true (which is the default), the parser will load arguments from the given file/location.</p>

<H4 class="md-title-2">Using CommandLine, The recommended way...</H4>
NCmdLine has a versatile parsing API. One way to use it is as follows :
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine cmdLine = NApp.of().getCmdLine(); // or from somewhere else
    NRef&lt;Boolean&gt; boolOption = NRef.of(false);
    NRef&lt;String&gt; stringOption = NRef.ofNull();
    List&lt;String&gt; others = new ArrayList&lt;&gt;();
    while (cmdLine.hasNext()) {
        cmdLine.matcher()
                .with("-o", "--option").matchFlag((v) -&gt; boolOption.set(v.booleanValue()))
                .with("-n", "--name").matchEntry((v) -&gt; stringOption.set(v.stringValue()))
                .withNonOption().matchAny((v) -&gt; stringOption.set(v.image()))
                .requireDefaults()
        ;
    }
    // test if application is running in exec mode
    // (and not in autoComplete mode)
    if (cmdLine.isExecMode()) {
        //do the good staff here
        NOut.println(NMsg.ofC("boolOption=%s stringOption=%s others=%s", boolOption, stringOption, others));
    }

</code></pre>

<H4 class="md-title-2">Using CommandLine, The simple and legacy way...</H4>
<pre class="md-code md-code-``` java"><code class="java">
NCmdLine cmdLine = NApp.of().getCmdLine();
boolean boolOption = false;
String stringOption = null;
List&lt;String&gt; others = new ArrayList&lt;&gt;();
NArg a;
while (cmdLine.hasNext()) {
    a = cmdLine.peek().get();
    if (a.isOption()) {
        switch (a.key()) {
            case "-o":
            case "--option": {
                a = cmdLine.nextFlag().get();
                if (a.isUncommented()) {
                    boolOption = a.getValue().asBoolean().get();
                }
                break;
            }
            case "-n":
            case "--name": {
                a = cmdLine.nextEntry().get();
                if (a.isUncommented()) {
                    stringOption = a.getValue().asString().get();
                }
                break;
            }
            default: {
                NSession.of().configureLast(cmdLine);
            }
        }
    } else {
        others.add(cmdLine.next().get().image());
    }
}
// test if application is running in exec mode
// (and not in autoComplete mode)
if (cmdLine.isExecMode()) {
    //do the good staff here
    NOut.println(NMsg.ofC("boolOption=%s stringOption=%s others=%s", boolOption, stringOption, others));
}
</code></pre>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="NOptional" >
                                <h3 class="main-section2"><a href="#UBB16079C805F5B1035F84A0CDD925EA59C9A2674">5.2 NOptional</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><b class="md-bold">nuts</b> introduces a concept very similar to java's Optional but with better extension builtin mechanisms and helper methods : <mark class="md-code md-code-``` ">NOptional</mark></p>
<p class="md-phrase"><mark class="md-code md-code-``` ">NOptional</mark> is extensively used in Nuts Package Manager itself.</p>
<H4 class="md-title-2">Non Null Assertion</H4>
Java has a builtin null Check mechanism but it does not enable customized messages or exceptions. Optional are described as per Java's (c) Documentation "A container object which may or may not contain a non-null value". NOptional is more of an Object Wrapper than addes several useful null related operators like '??' '?.' and '!' in typescript. 
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link " id="idi50-tab" data-toggle="tab" href="#idi50" role="tab" aria-controls="idi50" aria-selected="false">java</a></li>
<li class="nav-item" role="presentation"><a class="nav-link active" id="idi51-tab" data-toggle="tab" href="#idi51" role="tab" aria-controls="idi51" aria-selected="true">NAF</a></li>
</ul>
<div class="tab-content my-3"><div class="tab-pane fade show " id="idi50" role="tabpanel" aria-labelledby="idi50-tab"><pre class="md-code md-code-``` java"><code class="java">
    if(stringWord==null){
        throw new IllegalArgumentException("missing user name");
    }
    stringWord.toUpperCase()
</code></pre></div>
<div class="tab-pane fade show active" id="idi51" role="tabpanel" aria-labelledby="idi51-tab"><pre class="md-code md-code-``` java"><code class="java"> 
   // expected : stringWord!..toUpperCase()
    NOptional.ofNamed(stringWord,"user name").get().toUpperCase();
    // will throw an IllegalArgumentException|NIllegalArgumentException with "missing user name" message;
</code></pre></div>
</div>


<H4 class="md-title-2">Nullish Coalescing</H4>
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link " id="idi60-tab" data-toggle="tab" href="#idi60" role="tab" aria-controls="idi60" aria-selected="false">java</a></li>
<li class="nav-item" role="presentation"><a class="nav-link active" id="idi61-tab" data-toggle="tab" href="#idi61" role="tab" aria-controls="idi61" aria-selected="true">NAF</a></li>
</ul>
<div class="tab-content my-3"><div class="tab-pane fade show " id="idi60" role="tabpanel" aria-labelledby="idi60-tab"><pre class="md-code md-code-``` java"><code class="java">
    Number roadNumber=road.number!=null?road.number:10;
</code></pre></div>
<div class="tab-pane fade show active" id="idi61" role="tabpanel" aria-labelledby="idi61-tab"><pre class="md-code md-code-``` java"><code class="java"> 
    // expected : var roadNumber=road.number??10;
    Number roadNumber=NOptional.of(road.number).orElse(10);
</code></pre></div>
</div>


<H4 class="md-title-2">Optional Chaining</H4>
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link " id="idi70-tab" data-toggle="tab" href="#idi70" role="tab" aria-controls="idi70" aria-selected="false">java</a></li>
<li class="nav-item" role="presentation"><a class="nav-link active" id="idi71-tab" data-toggle="tab" href="#idi71" role="tab" aria-controls="idi71" aria-selected="true">NAF</a></li>
</ul>
<div class="tab-content my-3"><div class="tab-pane fade show " id="idi70" role="tabpanel" aria-labelledby="idi70-tab"><pre class="md-code md-code-``` java"><code class="java">
    Number roadNumber=(app!=null &amp;&amp; app.person!=null &amp;&amp; app.person.road!=null)? app.person.address.road.number:null;
</code></pre></div>
<div class="tab-pane fade show active" id="idi71" role="tabpanel" aria-labelledby="idi71-tab"><pre class="md-code md-code-``` java"><code class="java"> 
    // expected var roadNumber=app?.person?.address?.road?.number;
    Number roadNumber=NOptional.of(app).then(v-&gt;v.person).then(v-&gt;v.road).then(v-&gt;v.number).orNull();
</code></pre></div>
</div>


<H4 class="md-title-2">Combining Optional Chaining</H4>
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link " id="idi80-tab" data-toggle="tab" href="#idi80" role="tab" aria-controls="idi80" aria-selected="false">java</a></li>
<li class="nav-item" role="presentation"><a class="nav-link active" id="idi81-tab" data-toggle="tab" href="#idi81" role="tab" aria-controls="idi81" aria-selected="true">NAF</a></li>
</ul>
<div class="tab-content my-3"><div class="tab-pane fade show " id="idi80" role="tabpanel" aria-labelledby="idi80-tab"><pre class="md-code md-code-``` java"><code class="java">
    Address address=(app!=null &amp;&amp; app.person!=null)?app.person.address:null;
    if(address==null){
       throw new IllegalArgumentException("missing address"); 
    }
    Number roadNumber=(address!=null 
        &amp;&amp; address.road!=null)
        ? address.road.number:0;
</code></pre></div>
<div class="tab-pane fade show active" id="idi81" role="tabpanel" aria-labelledby="idi81-tab"><pre class="md-code md-code-``` java"><code class="java"> 
    // expected : var roadNumber=app?.person?.address!.road?.number??0;
    Number roadNumber=NOptional.of(app).then(v-&gt;v.person).then(v-&gt;v.address).get().then(v-&gt;v.road).then(v-&gt;v.number).orElse(0);
</code></pre></div>
</div>



                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="NStream" >
                                <h3 class="main-section2"><a href="#UBB16079C805F5B1035F84A0CDD925EA59C9A2674">5.3 NStream</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><b class="md-bold">nuts</b> introduces a concept very similar to java's Stream but with better extension builtin mechanisms and helper methods : <mark class="md-code md-code-``` ">NStream</mark></p>
<p class="md-phrase"><mark class="md-code md-code-``` ">NStream</mark> is actually a wrapper to java's Stream, Iterator and Iterable and you can create a stream using <code class="md-code md-code-``` NStream">.of(...)</code> methods.</p>
<p class="md-phrase"><mark class="md-code md-code-``` ">NStream</mark> is extensively used in Search Command.</p>

                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                    </section>
                    <hr class="divider">
                
                    <!--pageLevel1-->
                    <section id="UADD8DCBABF541F74E0BDC436A4976124F546D3A5" >
                        <h2 class="main-section1"><a href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6 Nuts Application Framework</a></h2>
                        <div class="text-card">
                        <p class="md-phrase"><mark class="md-code md-code-` ">nuts</mark> is a package manager that can be embedded in your application and hence present a solid Application Framework and tooling to make the applicable more robust and more portable.</p>
<p class="md-phrase"><mark class="md-code md-code-` ">nuts</mark> as a Framework :</p>
<ul class="md-ul"><li class="md-uli">Adds support for Application Lifecycle (Hooks for install, update, uninstall)</li><li class="md-uli">Adds support for auto update</li><li class="md-uli">Adds support for isolated input/output (via session in/out)</li><li class="md-uli">Adds support for Desktop Integration<ul class="md-ul"><li class="md-uli">Adds Shortcuts, Menus</li><li class="md-uli">Adds Aliases</li></ul></li><li class="md-uli">Adds support for Base Directory API<ul class="md-ul"><li class="md-uli">API to manage per application directories (log, cache, config,...)</li></ul></li><li class="md-uli">Adds support for Base Commandline API<ul class="md-ul"><li class="md-uli">standardized commandline options</li><li class="md-uli">inherit common options (--table, --json, ...)</li></ul></li></ul>

                        </div>
                        
                            <!--pageLevel2-->
                            <section id="nutsAppNAF" >
                                <h3 class="main-section2"><a href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6.1 Nuts Application Framework</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-1">Using Nuts Application Framework (NAF)</H4>
<p class="md-phrase">Using <mark class="md-code md-code-``` ">nuts</mark> is transparent as we have seen so far. It's transparent both at build time and runtime. However, <mark class="md-code md-code-``` ">nuts</mark> can provide our application a set of unique helpful features, such as install and uninstall hooks, comprehensive command line support and so on.</p>
<p class="md-phrase">To create your first <mark class="md-code md-code-``` ">NAF</mark> application, you will need to add nuts as a dependency and change your <code class="md-code md-code-` ">pom.xml</code> as follows:</p>
<pre class="md-code md-code-``` xml"><code class="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;
    &lt;artifactId&gt;my-app&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;net.thevpc.nuts&lt;/groupId&gt;
            &lt;artifactId&gt;nuts-lib&lt;/artifactId&gt;
            &lt;version&gt;&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;jexcelapi&lt;/groupId&gt;
            &lt;artifactId&gt;jxl&lt;/artifactId&gt;
            &lt;version&gt;2.4.2&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
        &lt;nuts.application&gt;true&lt;/nuts.application&gt;
    &lt;/properties&gt;
&lt;/project&gt; 
</code></pre>
<p class="md-phrase">Please take note that we have added a property <code class="md-code md-code-` ">nuts.application=true</code>.  Actually this is not mandatory, but this will help <mark class="md-code md-code-``` ">nuts</mark> package manager detect that this application uses NAF before downloading its jar (the information will be available in the <code class="md-code md-code-``` pom">.xml</code> descriptor on the remote repository).</p>
Then we will add some cool features to our application. We write a dummy message whenever the application is installed, uninstalled or updated. We will also add support to "--file=[path]" argument to specify the workbook path.
<pre class="md-code md-code-``` java"><code class="java">
package com.mycompany.app;

import java.io.File;

import jxl.Workbook;
import jxl.write.WritableWorkbook;

public class App implements NApplication {

    public static void main(String[] args) {
        // just create an instance and call runAndExit in the main method
        // this method ensures that exist code is well propagated
        // from exceptions to caller processes
        new App().run(NAppRunOptions.ofExit(args));
    }

    @Override
    public void run() {
        NCmdLine cmd = NApp.of().getCmdLine();
        File file = new File("file.xls");
        while (cmd.hasNext()) {
            switch (cmd.getKey().getString()) {
                case "--file": {
                    NArg a = cmd.nextEntry().get();
                    file = new File(a.getStringValue());
                    break;
                }
                case "--fill": {
                    // process other options here ...
                    break;
                }
                default: {
                    s.configureLast(cmd);
                }
            }
        }
        try {
            WritableWorkbook w = Workbook.createWorkbook(file);
            s.out().printf("Workbook just created at %s%n", file);
        } catch (Exception ex) {
            ex.printStackTrace(s.err());
        }
    }

    @Override // this method is not required, implement when needed
    public void onInstallApplication() {
        NOut.println(NMsg.ofC("we are installing My Application : %s%n", NApp.of().getId()));
    }

    @Override // this method is not required, implement when needed
    public void onUninstallApplication() {
        NOut.println(NMsg.ofC("we are uninstalling My Application : %s%n", NApp.of().getId()));
    }

    @Override // this method is not required, implement when needed
    public void onUpdateApplication() {
        NOut.println(NMsg.ofC("we are updating My Application : %s%n", NApp.of().getId()));
    }
}

</code></pre>
Now we can install or uninstall the application and see the expected messages.
<pre class="md-code md-code-``` bash"><code class="bash">
nuts -y install com.mycompany.app:my-app
nuts -y uninstall com.mycompany.app:my-app
</code></pre>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="filesystem" >
                                <h3 class="main-section2"><a href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6.2 File system</a></h3>
                                <div class="text-card">
                                <b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b>
 manages multiple workspaces. It has a default one located at ~/.config/nuts (~ is the user home directory). Each workspace handles a database and files related to the installed applications. The workspace has a specific layout to store different types of files relatives to your applications. 
<b class="md-bold">nuts</b>
<p class="md-phrase"> is largely inspired by <a href="https://specifications.freedesktop.org/basedir-spec/basedir-spec-latest.html" class="md-link">XDG Base Directory Specification</a> and hence defines several  store locations for each file type. Such organization of folders is called Layout and is dependent on the current operating system, the layout strategy and any custom configuration.</p>
<H4 class="md-title-2">Store Locations</H4>

Supported Store Locations are : 
<p class="md-phrase"><b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> File System defines the following folders :</p>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><b class="md-bold">config</b> : defines the base directory relative to which application specific configuration files should be stored.</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">apps</b> : defines the base directory relative to which application executable binaries should be stored</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">lib</b> : defines the base directory relative to which application non executable binaries should be stored</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">var</b> : defines the base directory relative to which application specific data files (other than config) should be stored</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">log</b> : defines the base directory relative to which application specific log and trace files should be stored</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">temp</b> : defines the base directory relative to which application specific temporary files should be stored</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">cache</b> : defines the base directory relative to which application non-essential data and binary files should be stored to optimize bandwidth or performance</p></li><li class="md-uli"><p class="md-phrase"><b class="md-bold">run</b> : defines the base directory relative to which application-specific non-essential runtime files and other file objects (such as sockets, named pipes, ...) should be stored</p></li></ul>
<p class="md-phrase"><b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> defines such distinct folders (named Store Locations) for storing different types of application data according to your operating system.</p>
On Windows Systems the default locations are :
<ul class="md-ul"><li class="md-uli">apps     : "$HOME/AppData/Roaming/nuts/apps"</li><li class="md-uli">lib      : "$HOME/AppData/Roaming/nuts/lib"</li><li class="md-uli">config   : "$HOME/AppData/Roaming/nuts/config"</li><li class="md-uli">var      : "$HOME/AppData/Roaming/nuts/var"</li><li class="md-uli">log      : "$HOME/AppData/Roaming/nuts/log"</li><li class="md-uli">temp     : "$HOME/AppData/Local/nuts/temp"</li><li class="md-uli">cache    : "$HOME/AppData/Local/nuts/cache"</li><li class="md-uli">run      : "$HOME/AppData/Local/nuts/run"</li></ul>
On Linux, Unix, MacOS and any POSIX System the default locations are :
<ul class="md-ul"><li class="md-uli">config   : "$HOME/.config/nuts"</li><li class="md-uli">apps     : "$HOME/.local/share/nuts/apps"</li><li class="md-uli">lib      : "$HOME/.local/share/nuts/lib"</li><li class="md-uli">var      : "$HOME/.local/share/nuts/var"</li><li class="md-uli">log      : "$HOME/.local/log/nuts"</li><li class="md-uli">cache    : "$HOME/.cache/nuts"</li><li class="md-uli">temp     : "$java.io.tmpdir/$username/nuts"</li><li class="md-uli">run      : "/run/user/$USER_ID/nuts"</li></ul>
As an example, the configuration folder for the artifact net.thevpc.app:netbeans-launcher#1.2.4 in the default workspace in a Linux environment is
<pre class="md-code md-code-``` "><code class="">
home/me/.config/nuts/default-workspace/config/id/net/vpc/app/netbeans-launcher/1.2.4/
</code></pre>
And the log file "app.log" for the same artifact in the workspace named "personal" in a Windows environment is located at
<pre class="md-code md-code-``` "><code class="">
C:/Users/me/AppData/Roaming/nuts/log/nuts/personal/config/id/net/vpc/app/netbeans-launcher/1.2.4/app.log
</code></pre>

<H4 class="md-title-2">Store Location Strategies</H4>
<p class="md-phrase">When you install any application using the <b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> command a set of specific folders for the presented Store Locations are created. For that,  two strategies exist : <b class="md-bold">Exploded strategy</b> (the default) and <b class="md-bold">Standalone strategy</b>.  </p>
<p class="md-phrase">In <b class="md-bold">Exploded strategy</b>  <b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> defines top level folders (in linux ~/.config for config Store Location etc), and then creates withing each top level Store Location a sub folder for the given application (or application version to be more specific). This helps putting all your config files in a SSD partition for instance and make <b class="md-bold">nuts</b> run faster. However if you are interested in the backup or roaming of your workspace, this may be not the best approach.</p>
<p class="md-phrase">The <b class="md-bold">Standalone strategy</b>   is indeed provided mainly for Roaming workspaces that can be shared, copied, moved to other locations. A single root folder will contain all of the Store Locations.</p>
As an example, in "Standalone Strategy", the configuration folder for the artifact net.thevpc.app:netbeans-launcher#1.2.4 in the default workspace in a Linux environment is
<pre class="md-code md-code-``` "><code class="">
home/me/.config/nuts/default-workspace/config/id/net/vpc/app/netbeans-launcher/1.2.4/
</code></pre>
And the log file "app.log" for the same artifact in the workspace named "personal" in the same Linux environment is located at
<pre class="md-code md-code-``` "><code class="">
/home/me/.config/nuts/default-workspace/log/id/net/vpc/app/netbeans-launcher/1.2.4/
</code></pre>
You can see here that the following folder will contain ALL the data files of the workspace.
<pre class="md-code md-code-``` "><code class="">
/home/me/.config/nuts/default-workspace
</code></pre>
<p class="md-phrase">whereas in the <b class="md-bold">Exploded strategy</b> the Store Location are "exploded" into multiple root folders.</p>

<H4 class="md-title-2">Custom Store Locations</H4>
Of course, you are able to configure separately each Store Location to meet your needs.
<H4 class="md-title-3">Selecting strategies</H4>
The following command will create an exploded workspace
<pre class="md-code md-code-``` "><code class="">
nuts -w my-workspace --exploded
</code></pre>
The following command will create a standalone workspace
<pre class="md-code md-code-``` "><code class="">
nuts -w my-workspace --standalone
</code></pre>

<H4 class="md-title-3">Finer Customization</H4>
The following command will create an exploded workspace and moves all config files to the SSD partition folder /myssd/myconfig
<pre class="md-code md-code-``` "><code class="">
nuts -w my-workspace --system-conf-home=/myssd/myconfig
</code></pre>
You can type help for more details.
<pre class="md-code md-code-``` "><code class="">
nuts help
</code></pre>



                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="nutsApp" >
                                <h3 class="main-section2"><a href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6.3 Your first Application using nuts</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-2">Running your application with Nuts</H4>
<p class="md-phrase">Lets take, step by step, an example of an application that you will run using <mark class="md-code md-code-``` ">nuts</mark> package manager</p>
<p class="md-phrase">First we can create the project using your favourite IDE or using simply <mark class="md-code md-code-` ">mvn</mark> command</p>
<pre class="md-code md-code-``` "><code class="">
mvn archetype:generate -DgroupId=com.mycompany.app -DartifactId=my-app -DarchetypeArtifactId=maven-archetype-simple -DarchetypeVersion=1.4 -DinteractiveMode=false
</code></pre>
We will have a fully generated java project
<pre class="md-code md-code-``` bash"><code class="bash">
~/&gt; tree
.
└── my-app
    ├── pom.xml
    └── src
        ├── main
            └── java
                └── com
                    └── mycompany
                        └── app
                            └── App.java

</code></pre>
<p class="md-phrase">Now we will add some dependencies to the project. Let's add <code class="md-code md-code-` ">jexcelapi:jxl#2.4.2</code> and update <code class="md-code md-code-` ">pom.xml</code> consequently.</p>
<pre class="md-code md-code-``` xml"><code class="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;
    &lt;artifactId&gt;my-app&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;jexcelapi&lt;/groupId&gt;
            &lt;artifactId&gt;jxl&lt;/artifactId&gt;
            &lt;version&gt;2.4.2&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
    &lt;/properties&gt;
&lt;/project&gt; 
</code></pre>
Now we update the App.java file
<pre class="md-code md-code-``` java"><code class="java">
package com.mycompany.app;

import java.io.File;

import jxl.Workbook;
import jxl.write.WritableWorkbook;

public class App {

    public static void main(String[] args) {
        try {
            WritableWorkbook w = Workbook.createWorkbook(new File("any-file.xls"));
            System.out.println("Workbook just created");
        } catch (Exception ex) {
            ex.printStackTrace();
        }
    }
}

</code></pre>
finally we compile the app:
<pre class="md-code md-code-``` bash"><code class="bash">
mvn clean install
</code></pre>
<p class="md-phrase">Of course, we won't be able to run the application yet. Would we? For this app to work there are several ways, all of them are complicated and require modifying the <code class="md-code md-code-` ">pom.xml</code>  and even modifying the output jar. we can for instance generate an output lib directory and update the <mark class="md-code md-code-` ">META-INF</mark> file using <mark class="md-code md-code-` ">maven-dependency-plugin</mark>. (see <a href="https://maven.apache.org/plugins/maven-shade-plugin" class="md-link">https://maven.apache.org/plugins/maven-shade-plugin</a> ; <a href="https://www.baeldung.com/executable-jar-with-maven" class="md-link">https://www.baeldung.com/executable-jar-with-maven</a>). We could also use <mark class="md-code md-code-` ">maven-assembly-plugin</mark> to include the dependencies into the jar itself ('what the fat' jar!). Another alternative is to use an uglier solution with <mark class="md-code md-code-``` ">maven-shade-plugin</mark> and blend libraries into the main jar. In all cases we need as well to configure <mark class="md-code md-code-` ">maven-jar-plugin</mark> to specify the main class file.</p>
<p class="md-phrase">I am not exposing all solutions here. You can read this article for more details (<a href="https://www.baeldung.com/executable-jar-with-maven" class="md-link">https://www.baeldung.com/executable-jar-with-maven</a>) but trust me, they all stink.Instead of that we will use <mark class="md-code md-code-` ">nuts</mark>. In that case, actually we are already done, the app is already OK! We do not need to specify the main class neither are we required to bundle <mark class="md-code md-code-` ">jxl</mark> and its dependencies. We only need to run the app. That's it.</p>
<p class="md-phrase">Basically, you can install the application using its identifier <code class="md-code md-code-` ">com.mycompany.app:my-app</code>. The latest version will be resolved.</p>
<pre class="md-code md-code-``` bash"><code class="bash">
nuts install com.mycompany.app:my-app
nuts my-app
</code></pre>
This will install the application and run it on the fly. Dependencies will be detected, resolved and downloaded. The application is installed from local maven repository. It needs to be deployed to a public repository for it to be publicly accessible, however.
We can also choose not to install the app and bundle it as a jar. No need for a public repository in that case:
<pre class="md-code md-code-``` bash"><code class="bash">
nuts -y com my-app-1.0.0-SNAPSHOT.jar
</code></pre>
<p class="md-phrase">As we can see, <mark class="md-code md-code-` ">nuts</mark> provides the simplest and the most elegant way to deploy your application.</p>
<p class="md-phrase">One question though. what happens if we define multiple main methods (in multiple public classes). It's handled as well by <mark class="md-code md-code-``` ">nuts</mark> seamlessly. It just asks, at runtime, for the appropriate class to run.</p>

<H4 class="md-title-1">Using Nuts Application Framework</H4>
<p class="md-phrase">Using <mark class="md-code md-code-``` ">nuts</mark> is transparent as we have seen so far. It's transparent both at build time and runtime. However, <mark class="md-code md-code-``` ">nuts</mark> can provide our application a set of unique helpful features, such as install and uninstall hooks, comprehensive command line support and so on.</p>
<p class="md-phrase">To create your first <mark class="md-code md-code-``` ">NAF</mark> application, you will need to add nuts as a dependency and change your <code class="md-code md-code-` ">pom.xml</code> as follows:</p>
<pre class="md-code md-code-``` xml"><code class="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;com.mycompany.app&lt;/groupId&gt;
    &lt;artifactId&gt;my-app&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;net.thevpc.nuts&lt;/groupId&gt;
            &lt;artifactId&gt;nuts-lib&lt;/artifactId&gt;
            &lt;version&gt;&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;jexcelapi&lt;/groupId&gt;
            &lt;artifactId&gt;jxl&lt;/artifactId&gt;
            &lt;version&gt;2.4.2&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
        &lt;nuts.application&gt;true&lt;/nuts.application&gt;
    &lt;/properties&gt;
&lt;/project&gt; 
</code></pre>
<p class="md-phrase">Please take note that we have added a property <code class="md-code md-code-` ">nuts.application=true</code>.  Actually this is not mandatory, but this will help <mark class="md-code md-code-``` ">nuts</mark> package manager detect that this application uses NAF before downloading its jar (the information will be available in the <code class="md-code md-code-``` pom">.xml</code> descriptor on the remote repository).</p>
Then we will add some cool features to our application. We write a dummy message whenever the application is installed, uninstalled or updated. We will also add support to "--file=[path]" argument to specify the workbook path.
<pre class="md-code md-code-``` java"><code class="java">
package com.mycompany.app;

import java.io.File;

import jxl.Workbook;
import jxl.write.WritableWorkbook;

public class App implements NApplication {

    public static void main(String[] args) {
        // just create an instance and call runAndExit in the main method
        // this method ensures that exist code is well propagated
        // from exceptions to caller processes
        new App().run(NAppRunOptions.ofExit(args));
    }

    @Override
    public void run() {
        NCmdLine cmd = NApp.of().getCmdLine();
        File file = new File("file.xls");
        while (cmd.hasNext()) {
            switch (cmd.getKey().getString()) {
                case "--file": {
                    NArg a = cmd.nextEntry().get();
                    file = new File(a.getStringValue());
                    break;
                }
                case "--fill": {
                    // process other options here ...
                    break;
                }
                default: {
                    s.configureLast(cmd);
                }
            }
        }
        try {
            WritableWorkbook w = Workbook.createWorkbook(file);
            s.out().printf("Workbook just created at %s%n", file);
        } catch (Exception ex) {
            ex.printStackTrace(s.err());
        }
    }

    @Override // this method is not required, implement when needed
    public void onInstallApplication() {
        NOut.println(NMsg.ofC("we are installing My Application : %s%n", NApp.of().getId()));
    }

    @Override // this method is not required, implement when needed
    public void onUninstallApplication() {
        NOut.println(NMsg.ofC("we are uninstalling My Application : %s%n", NApp.of().getId()));
    }

    @Override // this method is not required, implement when needed
    public void onUpdateApplication() {
        NOut.println(NMsg.ofC("we are updating My Application : %s%n", NApp.of().getId()));
    }
}

</code></pre>
Now we can install or uninstall the application and see the expected messages.
<pre class="md-code md-code-``` bash"><code class="bash">
nuts -y install com.mycompany.app:my-app
nuts -y uninstall com.mycompany.app:my-app
</code></pre>


                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="UA527031D9FD2190202524E185D919F7974838721" >
                                <h3 class="main-section2"><a href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6.4 Command Line Arguments</a></h3>
                                <div class="text-card">
                                <p class="md-phrase"><b class="md-bold">nuts</b> supports a specific format for command line arguments. This format is the format supported in <b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> Application Framework (NAF) and as such all NAF applications support the same command line arguments format. Arguments in <b class="md-bold"><mark class="md-code md-code-``` ">nuts</mark></b> can be options or non options. Options always start with hyphen (-). </p>
<H4 class="md-title-2">Nuts Application Framework CommandLine</H4>
<p class="md-phrase">Application Command line can be retrieved via <mark class="md-code md-code-` ">NApp</mark> instance:</p>
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine c1= NApp.of().getCmdine();
</code></pre>

<H4 class="md-title-2">Exec / Autocomplete modes</H4>
<pre class="md-code md-code-``` java"><code class="java">
    NCmdLine c= NApp.of().getCmdine();
    if(c.isExecMode()){
        ///    
    }
</code></pre>

<H4 class="md-title-2">Default Options</H4>
All Applications inherit some default and useful options (see Nuts Command Line options for details). These options affect current session behaviour.
<ul class="md-ul"><li class="md-uli"><mark class="md-code md-code-` ">-T</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--output-format-option</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-O</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--output-format</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--tson</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--yaml</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--json</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--props</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--plain</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--table</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--tree</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--xml</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-y</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--yes</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--ask</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-n</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--no</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--error</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--trace</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--solver</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--progress</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--debug</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-f</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--fetch</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-a</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--anywhere</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-F</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--offline</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--online</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--remote</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-c</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--color</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-B</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--bot</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--dry</mark></li><li class="md-uli"><mark class="md-code md-code-` ">-D</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--out-line-prefix</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--err-line-prefix</mark></li><li class="md-uli"><mark class="md-code md-code-` ">--line-prefix</mark>
<pre class="md-code md-code-` "><code class="">
* </code></pre>
</li></ul>
-
-
embedded
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
b
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
external
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
spawn
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
x
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
system
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
current-user
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
as-root
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
sudo
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
as-user
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
verbose
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-verbose
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-finest
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-finer
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-fine
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-info
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-warning
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-severe
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-config
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-all
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-off
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-verbose
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-finest
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-finer
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-fine
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-info
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-warning
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-severe
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-config
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-all
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-term-off
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-verbose
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-finest
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-finer
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-fine
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-info
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-warning
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-severe
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-config
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-all
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-off
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-size
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-name
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-base
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
log-file-count
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
?
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
h
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
help
<pre class="md-code md-code-` "><code class="">
* </code></pre>
-
-
skip-event
<pre class="md-code md-code-` "><code class="">
* </code></pre>
<p class="md-phrase">--version<code class="md-code md-code-` "></code></p>



















































                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                            <!--pageLevel2-->
                            <section id="U5B2E7ED4013F2621CF1DC9893122264E86CE0BD1" >
                                <h3 class="main-section2"><a href="#UADD8DCBABF541F74E0BDC436A4976124F546D3A5">6.5 Nuts Descriptor Integration</a></h3>
                                <div class="text-card">
                                <H4 class="md-title-2">Nuts Descriptor Integration</H4>
<ul class="md-ul"><li class="md-uli">Seamless integration</li><li class="md-uli">Maven Solver</li></ul>
<H4 class="md-title-3">Nuts and Maven</H4>
<ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.executable=&lt;true|false&gt;</code> : when true the artifact is an executable (contains main class)</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.application=&lt;true|false&gt;</code> : when true the artifact is an executable application (implements NutsApplication)</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.gui=&lt;true|false&gt;</code> : when true the requires a gui environment to execute</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.term=&lt;true|false&gt;</code> : when true the artifact is a command line executable</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.icons=&lt;icon-path-string-array&gt;</code> : an array (separated with ',' or new lines) of icon paths (url in the NPath   format)</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.genericName=&lt;genericNameString&gt;</code> : a generic name for the application like 'Text Editor'</p><ul class="md-ul"><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.categories=&lt;categories-string-array&gt;</code> : an array (separated with ',' or new lines) of categories. the       categories should be compatible with Free Desktop Menu       specification (<a href="https://specifications.freedesktop.org/menu-spec/menu-spec-1.0.html" class="md-link">https://specifications.freedesktop.org/menu-spec/menu-spec-1.0.html</a>)</p></li></ul></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.&lt;os&gt;-os-dependencies</code> : list (':',';' or line separated) of short ids of dependencies that shall be appended to   classpath only if running on the given os (see NutsOsFamily). This is a ways more simple than using the builtin '   profile' concept of Maven (which is of course supported as well)</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.&lt;arch&gt;-arch-dependencies</code> : list (':',';' or line separated) of short ids of dependencies that shall be appended   to classpath only if running on the given hardware architecture (see NutsArchFamily). This is a ways more simple than   using the builtin 'profile' concept of Maven (which is of course supported as well)</p></li><li class="md-uli"><p class="md-phrase"><code class="md-code md-code-` ">nuts.&lt;os&gt;-os-&lt;arch&gt;-arch-dependencies</code> : list (':',';' or line separated) of short ids of dependencies that shall be   appended to classpath only if running on the given hardware architecture and os family</p></li></ul>
<pre class="md-code md-code-``` xml"><code class="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://maven.apache.org/POM/4.0.0"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;groupId&gt;your-group&lt;/groupId&gt;
    &lt;artifactId&gt;your-project&lt;/artifactId&gt;
    &lt;version&gt;1.2.3&lt;/version&gt;
    &lt;packaging&gt;jar&lt;/packaging&gt;
    &lt;properties&gt;
        &lt;!--properties having special meanings in Nuts--&gt;
        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;

        &lt;!--properties specific to nuts for developers extending nuts--&gt;
        &lt;nuts.runtime&gt;true&lt;/nuts.runtime&gt; &lt;!--if you implement a whole new runtime--&gt;
        &lt;nuts.extension&gt;true&lt;/nuts.extension&gt; &lt;!--if you implement an extension--&gt;

        &lt;!--other properties specific to nuts--&gt;
        &lt;nuts.genericName&gt;A Generic Name&lt;/nuts.genericName&gt;
        &lt;nuts.executable&gt;true&lt;/nuts.executable&gt;
        &lt;nuts.application&gt;true&lt;/nuts.application&gt;
        &lt;nuts.gui&gt;true&lt;/nuts.gui&gt;
        &lt;nuts.term&gt;true&lt;/nuts.term&gt;

        &lt;nuts.categories&gt;
            /Settings/YourCategory
        &lt;/nuts.categories&gt;
        &lt;nuts.icons&gt;
            classpath://net/yourpackage/yourapp/icon.svg
            classpath://net/yourpackage/yourapp/icon.png
            classpath://net/yourpackage/yourapp/icon.ico
        &lt;/nuts.icons&gt;
        &lt;nuts.windows-os-dependencies&gt;
            org.fusesource.jansi:jansi
            com.github.vatbub:mslinks
        &lt;/nuts.windows-os-dependencies&gt;
        &lt;nuts.windows-os-x86_32-arch-dependencies&gt;
            org.fusesource.jansi:jansi
            com.github.vatbub:mslinks
        &lt;/nuts.windows-os-x86_32-arch-dependencies&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;

</code></pre>

<H4 class="md-title-3">Nuts and Java MANIFEST.MF</H4>
<pre class="md-code md-code-``` manifest"><code class="manifest">

Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Built-By: vpc
Created-By: Apache Maven 3.8.1
Build-Jdk: 1.8.0_302

Nuts-Id: groupid:artifactid#version
Nuts-Dependencies: org.fusesource.jansi:jansi#1.2?os=windows;com.github.vatbub:mslinks#1.3?os=windows
Nuts-Name: Your App Name
Nuts-Generic-Name: Your App Generic Name
Nuts-Description: Your App Description
Nuts-Categories: /Settings/YourCategory;/Settings/YourCategory2
Nuts-Icons: classpath://net/yourpackage/yourapp/icon.svg;classpath://net/yourpackage/yourapp/icon.png
Nuts-Property-YourProp: YourValue

Comment: if the Nuts-Id could not be found, best effort will be used from the following
Automatic-Module-Name: yourgroupid.yourartifactid.YourClass
Main-Class: groupid.artifactid.YourClass
Implementation-Version: 1.2.3

</code></pre>

<H4 class="md-title-3">Nuts and Java 9 (jdeps)</H4>
<p class="md-phrase">Nuts supports <mark class="md-code md-code-` ">Automatic-Module-Name</mark>.</p>
<pre class="md-code md-code-``` manifest"><code class="manifest">
Automatic-Module-Name: yourgroupid.yourartifactid.YourClass

</code></pre>

<H4 class="md-title-3">Nuts and Gradle (TODO)</H4>



                                </div>
                                
                            </section>
                            <hr class="divider">
                        
                    </section>
                    <hr class="divider">
                

            </div>
        </div>

    </div>
    <!-- Content end -->

    <!-- Footer
============================ -->
<footer id="footer" class="section bg-dark footer-text-light">
    <div class="container">
        <ul class="social-icons social-icons-lg social-icons-muted justify-content-center mb-3">
            <li><a data-toggle="tooltip" href="https://twitter.com/tbensalah/" target="_blank" title=""
                   data-original-title="Twitter"><i class="fab fa-twitter"></i></a></li>
            <li><a data-toggle="tooltip" href="http://www.facebook.com/tbensalah/" target="_blank" title=""
                   data-original-title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
            <li><a data-toggle="tooltip" href="http://www.dribbble.com/tbensalah/" target="_blank" title=""
                   data-original-title="Dribbble"><i class="fab fa-dribbble"></i></a></li>
            <li><a data-toggle="tooltip" href="https://github.com/thevpc/nuts" target="_blank" title=""
                   data-original-title="GitHub"><i class="fab fa-github"></i></a></li>
        </ul>
        <p class="text-2 text-center mb-0">
            Copyright © 2018-2025 Nuts Package Manager Team.
            <br>
            Generated with <a class="btn-link" target="_blank" href="apps.html#app-ndoc">ndoc</a> on 2025-09-03-033553
            <br>
            <span style="font-size: 0.5rem">Based on <a class="btn-link" target="_blank"
                                                        href="https://github.com/harnishdesign/iDocs">HarnishDesign</a></span>
        </p>
    </div>
</footer>
<!-- Footer end -->

</div>
<!-- Document Wrapper end -->

<!-- Back To Top -->
<a id="back-to-top" data-toggle="tooltip" title="Back to Top" href="javascript:void(0)"><i class="fa fa-chevron-up"></i></a>

<!-- JavaScript
============================ -->
<script src="assets/vendor/jquery/jquery.min.js"></script>
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<!-- Highlight JS -->
<script src="assets/vendor/highlight.js/highlight.min.js"></script>
<!-- Easing -->
<script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
<!-- Magnific Popup -->
<script src="assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
<!-- Custom Script -->
<script src="assets/js/theme.js"></script>
</body>
</html>
